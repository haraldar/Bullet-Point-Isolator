/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BulletPointIsolator
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var needsWriteBackUnloadEvent = true;
var lastOpenFilePath;
var ISOLATION_FILE_PATH = "isolation.md";
var BulletPointIsolator = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon("dice", "BulletPointIsolator Plugin", (evt) => {
      new import_obsidian.Notice("This is a notice i guess!");
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "open-sample-modal-simple",
      name: "Open sample modal (simple)",
      callback: () => {
        new BulletPointIsolatorModal(this.app).open();
      }
    });
    this.addCommand({
      id: "sample-editor-command",
      name: "BulletPointIsolator editor command",
      editorCallback: (editor, view) => {
        console.log(editor.getSelection());
        editor.replaceSelection("BulletPointIsolator Editor Command");
      }
    });
    this.addCommand({
      id: "open-sample-modal-complex",
      name: "Open sample modal (complex)",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (markdownView) {
          if (!checking) {
            new BulletPointIsolatorModal(this.app).open();
          }
          return true;
        }
      }
    });
    this.addSettingTab(new BulletPointIsolatorSettingTab(this.app, this));
    this.app.workspace.on("file-open", async (openedFile) => {
      if (!lastOpenFilePath)
        lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      console.log("Before", openedFile == null ? void 0 : openedFile.path);
      if (needsWriteBackUnloadEvent) {
        if (lastOpenFilePath === ISOLATION_FILE_PATH && (openedFile == null ? void 0 : openedFile.path) !== ISOLATION_FILE_PATH) {
          const isolationFile = this.app.vault.getFiles().find((file) => file.path === ISOLATION_FILE_PATH);
          if (isolationFile) {
            await this.app.workspace.getLeaf().openFile(isolationFile);
            this.writeBackModifiedBulletPoint(null).then(async () => await this.app.workspace.getLeaf().openFile(openedFile));
            console.log("After", openedFile == null ? void 0 : openedFile.path);
          }
        }
      }
      lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
    });
    this.registerDomEvent(document, "click", async (evt) => {
      var _a;
      if (evt.altKey && evt.ctrlKey && this.getBulletPointNr(evt.target.parentNode)) {
        const fileOriginPath = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.file.path;
        if (fileOriginPath === null || fileOriginPath === void 0) {
          this.showNotice("file origin is either null or undefined", true);
        } else {
          this.showNotice("Bullet Point Isolator activated.");
          fileOriginPath === ISOLATION_FILE_PATH ? await this.writeBackModifiedBulletPoint(evt) : await this.isolateBulletPoint(evt);
        }
      }
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  async openFileWithoutEvent(file) {
    needsWriteBackUnloadEvent = false;
    await this.app.workspace.getLeaf().openFile(file);
    needsWriteBackUnloadEvent = true;
  }
  async isolateBulletPoint(evt) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const currentFocusLine = (_b = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.editor) == null ? void 0 : _b.getCursor().line;
    if (currentFocusLine === void 0 || currentFocusLine === null) {
      this.showNotice("no line in focus", true);
      return;
    }
    const isBulletPoint = this.getBulletPointNr(evt.target.parentNode);
    if (isBulletPoint === null) {
      this.showNotice("line in focus doesn't have bullet point", true);
      return;
    }
    const bulletPointsCount = this.countBulletPointLines(evt.target.parentNode);
    let rootLine = (_d = (_c = this.app.workspace.activeEditor) == null ? void 0 : _c.editor) == null ? void 0 : _d.getLine(currentFocusLine);
    const rootOffset = rootLine == null ? void 0 : rootLine.match(/^\s*/)[0].length;
    if (rootOffset >= 1)
      rootLine = rootLine.substring(rootOffset);
    let linesToIsolate = [rootLine];
    for (let i = 1; i < bulletPointsCount; i++) {
      let lineToIsolate = (_f = (_e = this.app.workspace.activeEditor) == null ? void 0 : _e.editor) == null ? void 0 : _f.getLine(currentFocusLine + i);
      if (rootOffset >= 1) {
        lineToIsolate = lineToIsolate == null ? void 0 : lineToIsolate.substring(rootOffset);
      }
      linesToIsolate.push(lineToIsolate);
    }
    let bulletPointsText = linesToIsolate.join("\n");
    const frontmatterJson = {
      "origin": (_h = (_g = this.app.workspace.activeEditor) == null ? void 0 : _g.file) == null ? void 0 : _h.path,
      "startLine": currentFocusLine,
      "endLine": currentFocusLine + bulletPointsCount - 1,
      "offset": rootOffset
    };
    const frontmatter = this.convertJsonToFrontmatter(frontmatterJson);
    bulletPointsText = frontmatter + bulletPointsText;
    const isolatedFileAbstract = this.app.vault.getAbstractFileByPath(ISOLATION_FILE_PATH);
    if (isolatedFileAbstract)
      this.app.vault.delete(isolatedFileAbstract);
    const isolatedFile = await this.app.vault.create(ISOLATION_FILE_PATH, bulletPointsText);
    await this.app.workspace.getLeaf().openFile(isolatedFile);
  }
  async writeBackModifiedBulletPoint(evt) {
    var _a, _b, _c, _d, _e, _f, _g;
    const fileOrigin = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.file;
    if (evt) {
      const bulletPointNr = this.getBulletPointNr(evt.target.parentNode);
      if (bulletPointNr === null) {
        this.showNotice("line in focus doesn't have bullet point", true);
        return;
      } else if (bulletPointNr !== 1) {
        this.showNotice("line in focus isn't root bullet point", true);
        return;
      }
    }
    let fm;
    await this.app.fileManager.processFrontMatter(fileOrigin, (frontmatter) => fm = frontmatter);
    if (fm) {
      const fmLength = Object.keys(fm).length + 2;
      const isolationFileLineCount = (_c = (_b = this.app.workspace.activeEditor) == null ? void 0 : _b.editor) == null ? void 0 : _c.lineCount();
      const isolatedFileAbstract = (_d = this.app.workspace.activeEditor) == null ? void 0 : _d.file;
      let linesToWrite = [];
      for (let lineNr = fmLength; lineNr < isolationFileLineCount; lineNr++) {
        linesToWrite.push((_f = (_e = this.app.workspace.activeEditor) == null ? void 0 : _e.editor) == null ? void 0 : _f.getLine(lineNr));
      }
      const linesToWriteCount = linesToWrite.length;
      needsWriteBackUnloadEvent = false;
      const originFileAbstract = this.app.vault.getAbstractFileByPath(fm.origin);
      console.log("Opening file in heree");
      await this.app.workspace.getLeaf().openFile(originFileAbstract);
      const currentEditor = (_g = this.app.workspace.activeEditor) == null ? void 0 : _g.editor;
      for (let lineNr = fm.startLine; lineNr < fm.endLine; lineNr++) {
        currentEditor == null ? void 0 : currentEditor.setLine(lineNr, "");
      }
      if (linesToWriteCount > fm.endLine - fm.startLine + 1) {
        const spacers = "\n".repeat(linesToWriteCount - (fm.endLine - fm.startLine + 1));
        currentEditor == null ? void 0 : currentEditor.setLine(fm.endLine, spacers);
      } else {
        currentEditor == null ? void 0 : currentEditor.setLine(fm.endLine, "");
      }
      for (let i = 0; i < linesToWriteCount; i++) {
        const lineToWrite = fm.startLine + i;
        currentEditor == null ? void 0 : currentEditor.setLine(lineToWrite, "	".repeat(fm.offset) + linesToWrite[i]);
      }
      await this.app.vault.delete(isolatedFileAbstract);
      needsWriteBackUnloadEvent = true;
    }
  }
  showNotice(msg, isFail = false) {
    new import_obsidian.Notice(isFail ? `BulletPointIsolation failed: ${msg}.` : msg);
  }
  getBulletPointNr(elem) {
    const match = elem.className.match(/HyperMD-list-line-(\d+)/);
    return match ? parseInt(match[1]) : null;
  }
  countBulletPointLines(elem) {
    let sibling = elem;
    const rootOffset = this.getBulletPointNr(sibling);
    let siblingCount = 1;
    while (sibling.nextSibling !== null) {
      sibling = sibling.nextSibling;
      const siblingOffset = this.getBulletPointNr(sibling);
      if (rootOffset >= siblingOffset)
        break;
      siblingCount++;
    }
    return siblingCount;
  }
  convertJsonToFrontmatter(obj, pendingNewline = true) {
    let frontmatterArr = Object.keys(obj).map((key) => `${key}: ${obj[key]}`);
    frontmatterArr.push("---");
    frontmatterArr.unshift("---");
    let frontmatterText = frontmatterArr.join("\n");
    return pendingNewline ? frontmatterText + "\n" : frontmatterText;
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var BulletPointIsolatorModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.setText("Woah!");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var BulletPointIsolatorSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for my awesome plugin." });
    new import_obsidian.Setting(containerEl).setName("Setting #1").setDesc("It's a secret").addText((text) => text.setPlaceholder("Enter your secret").setValue(this.plugin.settings.mySetting).onChange(async (value) => {
      console.log("Secret: " + value);
      this.plugin.settings.mySetting = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBFZGl0b3JQb3NpdGlvbiwgVGV4dEZpbGVWaWV3LCBURmlsZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuXG4vLyBSZW1lbWJlciB0byByZW5hbWUgdGhlc2UgY2xhc3NlcyBhbmQgaW50ZXJmYWNlcyFcblxuaW50ZXJmYWNlIEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ3MgPSB7XG5cdG15U2V0dGluZzogJ2RlZmF1bHQnXG59XG5cbmxldCBuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcbmxldCBsYXN0T3BlbkZpbGVQYXRoO1xuXG5jb25zdCBJU09MQVRJT05fRklMRV9QQVRIID0gXCJpc29sYXRpb24ubWRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVsbGV0UG9pbnRJc29sYXRvciBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdkaWNlJywgJ0J1bGxldFBvaW50SXNvbGF0b3IgUGx1Z2luJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Ly8gQ2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBpY29uLlxuXHRcdFx0bmV3IE5vdGljZSgnVGhpcyBpcyBhIG5vdGljZSBpIGd1ZXNzIScpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxuXHRcdGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdTdGF0dXMgQmFyIFRleHQnKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tc2FtcGxlLW1vZGFsLXNpbXBsZScsXG5cdFx0XHRuYW1lOiAnT3BlbiBzYW1wbGUgbW9kYWwgKHNpbXBsZSknLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IEJ1bGxldFBvaW50SXNvbGF0b3JNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIFRoaXMgYWRkcyBhbiBlZGl0b3IgY29tbWFuZCB0aGF0IGNhbiBwZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG9uIHRoZSBjdXJyZW50IGVkaXRvciBpbnN0YW5jZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3NhbXBsZS1lZGl0b3ItY29tbWFuZCcsXG5cdFx0XHRuYW1lOiAnQnVsbGV0UG9pbnRJc29sYXRvciBlZGl0b3IgY29tbWFuZCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coZWRpdG9yLmdldFNlbGVjdGlvbigpKTtcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJ0J1bGxldFBvaW50SXNvbGF0b3IgRWRpdG9yIENvbW1hbmQnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBUaGlzIGFkZHMgYSBjb21wbGV4IGNvbW1hbmQgdGhhdCBjYW4gY2hlY2sgd2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgYXBwIGFsbG93cyBleGVjdXRpb24gb2YgdGhlIGNvbW1hbmRcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdvcGVuLXNhbXBsZS1tb2RhbC1jb21wbGV4Jyxcblx0XHRcdG5hbWU6ICdPcGVuIHNhbXBsZSBtb2RhbCAoY29tcGxleCknLFxuXHRcdFx0Y2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdC8vIENvbmRpdGlvbnMgdG8gY2hlY2tcblx0XHRcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0aWYgKG1hcmtkb3duVmlldykge1xuXHRcdFx0XHRcdC8vIElmIGNoZWNraW5nIGlzIHRydWUsIHdlJ3JlIHNpbXBseSBcImNoZWNraW5nXCIgaWYgdGhlIGNvbW1hbmQgY2FuIGJlIHJ1bi5cblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyBmYWxzZSwgdGhlbiB3ZSB3YW50IHRvIGFjdHVhbGx5IHBlcmZvcm0gdGhlIG9wZXJhdGlvbi5cblx0XHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XG5cdFx0XHRcdFx0XHRuZXcgQnVsbGV0UG9pbnRJc29sYXRvck1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gVGhpcyBjb21tYW5kIHdpbGwgb25seSBzaG93IHVwIGluIENvbW1hbmQgUGFsZXR0ZSB3aGVuIHRoZSBjaGVjayBmdW5jdGlvbiByZXR1cm5zIHRydWVcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyBTZXQgdGhlIG9uIGZpbGUtb3BlbiBldmVudCB0aGF0IGNoZWNrcyBpZiB3ZSB3YW50IHRvIHdyaXRlIGJhY2sgdGhlIGJ1bGxldCBwb2ludC5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgYXN5bmMgKG9wZW5lZEZpbGUpID0+IHtcblxuXHRcdFx0Ly8gU2V0IHRoZSBsYXN0IG9wZW5lZCBmaWxlIHRvIHRoZSBjdXJyZW50IGZpbGUuXG5cdFx0XHRpZiAoIWxhc3RPcGVuRmlsZVBhdGgpXG5cdFx0XHRcdGxhc3RPcGVuRmlsZVBhdGggPSBvcGVuZWRGaWxlPy5wYXRoO1xuXHRcdFx0Y29uc29sZS5sb2coXCJCZWZvcmVcIiwgb3BlbmVkRmlsZT8ucGF0aCk7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgcGFydCBvZiB0aGUgZXZlbnQgaXMgY3VycmVudGx5IGJsb2NrZWQuXG5cdFx0XHRpZiAobmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCkge1xuXG5cdFx0XHRcdC8vIENoZWNrcyB0aGF0IHdlIGp1c3Qgc3dpdGNoZWQgZnJvbSB0aGUgaXNvbGF0aW9uIGZpbGUgdG8gYW5vdGhlciBmaWxlLlxuXHRcdFx0XHRpZiAobGFzdE9wZW5GaWxlUGF0aCA9PT0gSVNPTEFUSU9OX0ZJTEVfUEFUSCAmJiBvcGVuZWRGaWxlPy5wYXRoICE9PSBJU09MQVRJT05fRklMRV9QQVRIKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayB0aGF0IHRoZSBpc29sYXRpb24gZmlsZSBleGlzdHMuXG5cdFx0XHRcdFx0Y29uc3QgaXNvbGF0aW9uRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmluZChmaWxlID0+IGZpbGUucGF0aCA9PT0gSVNPTEFUSU9OX0ZJTEVfUEFUSCk7XG5cdFx0XHRcdFx0aWYgKGlzb2xhdGlvbkZpbGUpIHtcblxuXHRcdFx0XHRcdFx0Ly8gRmlyc3Qgb3BlbiB0aGUgaXNvbGF0aW9uIGZpbGUgaW4gdGhlIGVkaXRvciBhbmQgd3JpdGUgYmFjay5cblx0XHRcdFx0XHRcdC8vIG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoaXNvbGF0aW9uRmlsZSk7XG5cdFx0XHRcdFx0XHQvLyBuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdC8vIGF3YWl0IHRoaXMub3BlbkZpbGVXaXRob3V0RXZlbnQoaXNvbGF0aW9uRmlsZSk7XG5cdFx0XHRcdFx0XHQvLyBhd2FpdCB0aGlzLndyaXRlQmFja01vZGlmaWVkQnVsbGV0UG9pbnQobnVsbCk7XG5cdFx0XHRcdFx0XHR0aGlzXG5cdFx0XHRcdFx0XHRcdC53cml0ZUJhY2tNb2RpZmllZEJ1bGxldFBvaW50KG51bGwpXG5cdFx0XHRcdFx0XHRcdC50aGVuKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUob3BlbmVkRmlsZSkpO1xuXG5cdFx0XHRcdFx0XHQvLyAvLyBPcGVuIHRoZSBmaWxlIHN0YXJ0ZWQgZnJvbSBiYWNrIG9wZW4uXG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIkZpbGUgYmVmb3JlXCIsIG9wZW5lZEZpbGUpO1xuXHRcdFx0XHRcdFx0Ly8gLy8gYXdhaXQgdGhpcy5vcGVuRmlsZVdpdGhvdXRFdmVudChvcGVuZWRGaWxlKTtcblx0XHRcdFx0XHRcdC8vIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUob3BlbmVkRmlsZSk7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIkZpbGUgYWZ0ZXJcIiwgb3BlbmVkRmlsZSk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkFmdGVyXCIsIG9wZW5lZEZpbGU/LnBhdGgpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2tpaWlcblx0XHRcdGxhc3RPcGVuRmlsZVBhdGggPSBvcGVuZWRGaWxlPy5wYXRoO1xuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgYSBET00gb25jbGljayBldmVudCBmb3IgaWYgaXNvbGF0ZSBvciB3cml0ZSBiYWNrIGEgYnVsbGV0IHBvaW50LlxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5hbHRLZXkgJiYgZXZ0LmN0cmxLZXkgJiYgdGhpcy5nZXRCdWxsZXRQb2ludE5yKGV2dC50YXJnZXQucGFyZW50Tm9kZSkpIHtcblxuXHRcdFx0XHQvLyBHZXQgc29tZSBpbmZvcyBhYm91dCB0aGUgZmlsZSBpbiBmb2N1cy5cblx0XHRcdFx0Y29uc3QgZmlsZU9yaWdpblBhdGggPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5maWxlLnBhdGg7XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGZpbGUgaXMgZGVmaW5lZCBvciBub3QuXG5cdFx0XHRcdGlmIChmaWxlT3JpZ2luUGF0aCA9PT0gbnVsbCB8fCBmaWxlT3JpZ2luUGF0aCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0dGhpcy5zaG93Tm90aWNlKFwiZmlsZSBvcmlnaW4gaXMgZWl0aGVyIG51bGwgb3IgdW5kZWZpbmVkXCIsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXG5cdFx0XHRcdFx0dGhpcy5zaG93Tm90aWNlKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yIGFjdGl2YXRlZC5cIik7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSBvcmlnaW4gaXMgYW55IGZpbGUgb3IgdGhlIGlzb2xhdGlvbiBmaWxlLlxuXHRcdFx0XHRcdGZpbGVPcmlnaW5QYXRoID09PSBJU09MQVRJT05fRklMRV9QQVRIXG5cdFx0XHRcdFx0XHQ/IGF3YWl0IHRoaXMud3JpdGVCYWNrTW9kaWZpZWRCdWxsZXRQb2ludChldnQpXG5cdFx0XHRcdFx0XHQ6IGF3YWl0IHRoaXMuaXNvbGF0ZUJ1bGxldFBvaW50KGV2dCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gV2hlbiByZWdpc3RlcmluZyBpbnRlcnZhbHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFyIHRoZSBpbnRlcnZhbCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiBjb25zb2xlLmxvZygnc2V0SW50ZXJ2YWwnKSwgNSAqIDYwICogMTAwMCkpO1xuXHR9XG5cdFxuXG5cdGFzeW5jIG9wZW5GaWxlV2l0aG91dEV2ZW50KGZpbGU6IFRGaWxlIHwgVEFic3RyYWN0RmlsZSkge1xuXHRcdG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQgPSBmYWxzZTtcblx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGUpO1xuXHRcdG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQgPSB0cnVlO1xuXHR9XG5cblx0YXN5bmMgaXNvbGF0ZUJ1bGxldFBvaW50KGV2dDogTW91c2VFdmVudCkge1xuXG5cdFx0Y29uc3QgY3VycmVudEZvY3VzTGluZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRvcj8uZ2V0Q3Vyc29yKCkubGluZTtcblxuXHRcdC8vIEEgc2VsZWN0ZWQgbGluZSBpcyByZXF1aXJlZC5cblx0XHRpZiAoY3VycmVudEZvY3VzTGluZSA9PT0gdW5kZWZpbmVkIHx8IGN1cnJlbnRGb2N1c0xpbmUgPT09IG51bGwpIHtcblx0XHRcdHRoaXMuc2hvd05vdGljZShcIm5vIGxpbmUgaW4gZm9jdXNcIiwgdHJ1ZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHNlbGVjdGVkIGZpbGUgbXVzdCBjb250YWluIGEgYnVsbGV0IHBvaW50LlxuXHRcdGNvbnN0IGlzQnVsbGV0UG9pbnQgPSB0aGlzLmdldEJ1bGxldFBvaW50TnIoZXZ0LnRhcmdldC5wYXJlbnROb2RlKTtcblx0XHRpZiAoaXNCdWxsZXRQb2ludCA9PT0gbnVsbCkge1xuXHRcdFx0dGhpcy5zaG93Tm90aWNlKFwibGluZSBpbiBmb2N1cyBkb2Vzbid0IGhhdmUgYnVsbGV0IHBvaW50XCIsIHRydWUpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBHZXQgYWxsIHRoZSBidWxsZXQgYW5kIHN1YmJ1bGxldCBwb2ludHMuXG5cdFx0Y29uc3QgYnVsbGV0UG9pbnRzQ291bnQgPSB0aGlzLmNvdW50QnVsbGV0UG9pbnRMaW5lcyhldnQudGFyZ2V0LnBhcmVudE5vZGUpO1xuXG5cdFx0Ly8gR2V0IGN1cnJlbnQgYWN0aXZlIGxpbmUuXG5cdFx0bGV0IHJvb3RMaW5lID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yPy5nZXRMaW5lKGN1cnJlbnRGb2N1c0xpbmUpO1xuXG5cdFx0Ly8gR2V0IHRoZSByb290IG9mZnNldCBhbmQgbm9ybWFsaXplIHRoZSBmaXJzdCBsaW5lLlxuXHRcdGNvbnN0IHJvb3RPZmZzZXQgPSByb290TGluZT8ubWF0Y2goL15cXHMqLylbMF0ubGVuZ3RoO1xuXHRcdGlmIChyb290T2Zmc2V0ID49IDEpXG5cdFx0XHRyb290TGluZSA9IHJvb3RMaW5lLnN1YnN0cmluZyhyb290T2Zmc2V0KTtcblxuXHRcdC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgbGluZXMgYWZmZWN0ZWQgYnkgdGhlIGNsaWNrLlxuXHRcdGxldCBsaW5lc1RvSXNvbGF0ZSA9IFtyb290TGluZV07XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBidWxsZXRQb2ludHNDb3VudDsgaSsrKSB7XG5cblx0XHRcdC8vIEdldCB0aGUgbGluZS5cblx0XHRcdGxldCBsaW5lVG9Jc29sYXRlID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yPy5nZXRMaW5lKGN1cnJlbnRGb2N1c0xpbmUgKyBpKTtcblxuXHRcdFx0Ly8gTm9ybWFsaXplIHRoZSBsZWFkaW5nIHNwYWNlcyBhbmQgaWYgaXQgaXMgYSBzcGFjZSB0aGVuIHJlcGxhY2UgaXQgd2l0aCB0YWJzLlxuXHRcdFx0aWYgKHJvb3RPZmZzZXQgPj0gMSkge1xuXHRcdFx0XHRsaW5lVG9Jc29sYXRlID0gbGluZVRvSXNvbGF0ZT8uc3Vic3RyaW5nKHJvb3RPZmZzZXQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQdXNoIHRoZSBsaW5lIHRvIHRoZSBhcnJheS5cblx0XHRcdGxpbmVzVG9Jc29sYXRlLnB1c2gobGluZVRvSXNvbGF0ZSk7XG5cdFx0fVxuXG5cdFx0Ly8gSm9pbiB0aGUgbGluZXMgdG8gdXNlIHRoZW0gaW5zaWRlIHRoZSBjcmVhdGUgZnVuY3Rpb24gbGF0ZXIuXG5cdFx0bGV0IGJ1bGxldFBvaW50c1RleHQgPSBsaW5lc1RvSXNvbGF0ZS5qb2luKFwiXFxuXCIpO1xuXG5cdFx0Ly8gQWRkIHNvbWUgZnJvbnRtYXR0ZXIgdG8gdGhlIGJ1bGxldHBvaW50IHRvIGNvcHkuXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJKc29uID0ge1xuXHRcdFx0XCJvcmlnaW5cIjogdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZmlsZT8ucGF0aCxcblx0XHRcdFwic3RhcnRMaW5lXCI6IGN1cnJlbnRGb2N1c0xpbmUsXG5cdFx0XHRcImVuZExpbmVcIjogY3VycmVudEZvY3VzTGluZSArIGJ1bGxldFBvaW50c0NvdW50IC0gMSxcblx0XHRcdFwib2Zmc2V0XCI6IHJvb3RPZmZzZXRcblx0XHR9XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmNvbnZlcnRKc29uVG9Gcm9udG1hdHRlcihmcm9udG1hdHRlckpzb24pO1xuXHRcdGJ1bGxldFBvaW50c1RleHQgPSBmcm9udG1hdHRlciArIGJ1bGxldFBvaW50c1RleHQ7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHRlbXBvcmFyeSBmaWxlIGlmIGl0IGRvZXNudCBleGlzdCBvdGhlcndpc2UgZGVsZXRlIGl0IGZpcnN0LlxuXHRcdGNvbnN0IGlzb2xhdGVkRmlsZUFic3RyYWN0ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKElTT0xBVElPTl9GSUxFX1BBVEgpO1xuXHRcdGlmIChpc29sYXRlZEZpbGVBYnN0cmFjdClcblx0XHRcdHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShpc29sYXRlZEZpbGVBYnN0cmFjdCk7XG5cblx0XHQvLyBXcml0ZSB0aGUgYnVsbGV0cyB0byB0aGUgdGVtcG9yYXJ5IGZpbGUuXG5cdFx0Y29uc3QgaXNvbGF0ZWRGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKElTT0xBVElPTl9GSUxFX1BBVEgsIGJ1bGxldFBvaW50c1RleHQpO1xuXG5cdFx0Ly8gQ3JlYXRlIG5ldyBsZWFmIGFuZCBvcGVuIGEgZmlsZSB0aGVyZS5cblx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGlzb2xhdGVkRmlsZSk7XG5cblx0XHQvLyB0aGlzLnNldElzb2xhdGlvbkZpbGVVbmxvYWRFdmVudCgpO1xuXG5cdH1cblxuXHRhc3luYyB3cml0ZUJhY2tNb2RpZmllZEJ1bGxldFBvaW50KGV2dDogTW91c2VFdmVudCB8IG51bGwgfCB1bmRlZmluZWQpIHtcblxuXHRcdGNvbnN0IGZpbGVPcmlnaW4gPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5maWxlO1xuXG5cdFx0Ly8gVGhlIHNlbGVjdGVkIGZpbGUgbXVzdCBjb250YWluIGEgYnVsbGV0IHBvaW50LlxuXHRcdGlmIChldnQpIHtcblx0XHRcdGNvbnN0IGJ1bGxldFBvaW50TnIgPSB0aGlzLmdldEJ1bGxldFBvaW50TnIoZXZ0LnRhcmdldC5wYXJlbnROb2RlKTtcblx0XHRcdGlmIChidWxsZXRQb2ludE5yID09PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMuc2hvd05vdGljZShcImxpbmUgaW4gZm9jdXMgZG9lc24ndCBoYXZlIGJ1bGxldCBwb2ludFwiLCB0cnVlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoIGJ1bGxldFBvaW50TnIgIT09IDEpIHtcblx0XHRcdFx0dGhpcy5zaG93Tm90aWNlKFwibGluZSBpbiBmb2N1cyBpc24ndCByb290IGJ1bGxldCBwb2ludFwiLCB0cnVlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgdGhlIGZyb250bWF0dGVyLCB0aGVuIG1vZGlmeSB0aGUgZmlsZXMgdXNpbmcgdGhvc2UgYXMgaW5wdXQuXG5cdFx0bGV0IGZtO1xuXHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlT3JpZ2luLCAoZnJvbnRtYXR0ZXIpID0+IGZtID0gZnJvbnRtYXR0ZXIpO1xuXHRcdC8vIGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlT3JpZ2luLCBhc3luYyAoZm0pID0+IHtcblx0XHRpZiAoZm0pIHtcblx0XHRcdC8vIEdldCB0aGUgYW1vdW50IG9mIGxpbmVzIHdlIG5lZWQgdG8gd3JpdGUuXG5cdFx0XHRjb25zdCBmbUxlbmd0aCA9IE9iamVjdC5rZXlzKGZtKS5sZW5ndGggKyAyO1xuXHRcdFx0Y29uc3QgaXNvbGF0aW9uRmlsZUxpbmVDb3VudCA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRvcj8ubGluZUNvdW50KCk7XG5cdFx0XHRjb25zdCBpc29sYXRlZEZpbGVBYnN0cmFjdCA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmZpbGU7XG5cblx0XHRcdC8vIFJlYWQgdGhlIGxpbmVzIHRvIHRyYW5zZmVyLlxuXHRcdFx0bGV0IGxpbmVzVG9Xcml0ZSA9IFtdO1xuXHRcdFx0Zm9yIChsZXQgbGluZU5yID0gZm1MZW5ndGg7IGxpbmVOciA8IGlzb2xhdGlvbkZpbGVMaW5lQ291bnQ7IGxpbmVOcisrKSB7XG5cdFx0XHRcdGxpbmVzVG9Xcml0ZS5wdXNoKHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRvcj8uZ2V0TGluZShsaW5lTnIpKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGxpbmVzVG9Xcml0ZUNvdW50ID0gbGluZXNUb1dyaXRlLmxlbmd0aDtcblxuXHRcdFx0Ly8gT3BlbiB0aGUgb3JpZ2luIGZpbGUgYW5kIGdldCB0aGUgZWRpdG9yLlxuXHRcdFx0bmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCA9IGZhbHNlO1xuXHRcdFx0Y29uc3Qgb3JpZ2luRmlsZUFic3RyYWN0ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZtLm9yaWdpbik7XG5cdFx0XHQvLyBhd2FpdCB0aGlzLm9wZW5GaWxlV2l0aG91dEV2ZW50KG9yaWdpbkZpbGVBYnN0cmFjdCk7XG5cdFx0XHRjb25zb2xlLmxvZyhcIk9wZW5pbmcgZmlsZSBpbiBoZXJlZVwiKTtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUob3JpZ2luRmlsZUFic3RyYWN0KTtcblx0XHRcdGNvbnN0IGN1cnJlbnRFZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5lZGl0b3I7XG5cblx0XHRcdC8vIEZyZWUgdXAgdGhlIHNwYWNlIGluIHRoZSBvcmlnaW4gZmlsZS5cblx0XHRcdGZvciAobGV0IGxpbmVOciA9IGZtLnN0YXJ0TGluZTsgbGluZU5yIDwgZm0uZW5kTGluZTsgbGluZU5yKyspIHtcblx0XHRcdFx0Y3VycmVudEVkaXRvcj8uc2V0TGluZShsaW5lTnIsIFwiXCIpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gVE9ETyBDaGVjayB3aGF0IGlmIGxlc3MgbGluZXMuXG5cdFx0XHRpZiAobGluZXNUb1dyaXRlQ291bnQgPiAoKGZtLmVuZExpbmUgLSBmbS5zdGFydExpbmUpICsgMSkpIHtcblx0XHRcdFx0Ly8gU2V0IHRoZSBsYXN0IGxpbmUgdG9cblx0XHRcdFx0Y29uc3Qgc3BhY2VycyA9IFwiXFxuXCIucmVwZWF0KGxpbmVzVG9Xcml0ZUNvdW50IC0gKChmbS5lbmRMaW5lIC0gZm0uc3RhcnRMaW5lKSArIDEpKTtcblx0XHRcdFx0Y3VycmVudEVkaXRvcj8uc2V0TGluZShmbS5lbmRMaW5lLCBzcGFjZXJzKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQvLyBTZXQgdGhlIGxhc3QgbGluZSBvZiB0aGUgcmFuZ2UgdG8gd3JpdGUgdG8gYSBzaW1wbGUgc3BhY2UuXG5cdFx0XHRcdGN1cnJlbnRFZGl0b3I/LnNldExpbmUoZm0uZW5kTGluZSwgXCJcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRyYW5zZmVyIHRoZSBsaW5lcyBmcm9tIGlzb2xhdGlvbiB0byB0aGUgbmV3IHBsYWNlLlxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lc1RvV3JpdGVDb3VudDsgaSsrKSB7XG5cdFx0XHRcdGNvbnN0IGxpbmVUb1dyaXRlID0gZm0uc3RhcnRMaW5lICsgaTtcblx0XHRcdFx0Y3VycmVudEVkaXRvcj8uc2V0TGluZShsaW5lVG9Xcml0ZSwgXCJcXHRcIi5yZXBlYXQoZm0ub2Zmc2V0KSArIGxpbmVzVG9Xcml0ZVtpXSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlbGV0ZSB0aGUgaXNvbGF0aW9uIGZpbGUuXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoaXNvbGF0ZWRGaWxlQWJzdHJhY3QpO1xuXG5cdFx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcblx0XHQvLyB9KTtcblx0XHR9XG5cdH1cblxuXHRzaG93Tm90aWNlKG1zZywgaXNGYWlsOiBib29sZWFuID0gZmFsc2UpIHtcblx0XHRuZXcgTm90aWNlKGlzRmFpbCA/IGBCdWxsZXRQb2ludElzb2xhdGlvbiBmYWlsZWQ6ICR7bXNnfS5gIDogbXNnKTtcblx0fVxuXG5cdGdldEJ1bGxldFBvaW50TnIoZWxlbSkge1xuXHRcdGNvbnN0IG1hdGNoID0gZWxlbS5jbGFzc05hbWUubWF0Y2goL0h5cGVyTUQtbGlzdC1saW5lLShcXGQrKS8pO1xuXHRcdHJldHVybiBtYXRjaCA/IHBhcnNlSW50KG1hdGNoWzFdKSA6IG51bGw7XG5cdH1cblxuXHRjb3VudEJ1bGxldFBvaW50TGluZXMoZWxlbSkge1xuXG5cdFx0Ly8gU2V0IHRoZSBwYXNzZWQgZWxlbWVudCBhcyBpbml0aWFsIHNpYmxpbmcgYW5kIGhldCBpdHMgb2Zmc2V0IG51bWJlci5cblx0XHRsZXQgc2libGluZyA9IGVsZW07XG5cdFx0Y29uc3Qgcm9vdE9mZnNldCA9IHRoaXMuZ2V0QnVsbGV0UG9pbnROcihzaWJsaW5nKTtcblxuXHRcdGxldCBzaWJsaW5nQ291bnQgPSAxO1xuXHRcdHdoaWxlIChzaWJsaW5nLm5leHRTaWJsaW5nICE9PSBudWxsKSB7XG5cblxuXHRcdFx0Ly8gU2V0IHRoZSBzaWJsaW5nIGFzIGl0cyBuZXh0IHNpYmxpbmcuXG5cdFx0XHRzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcblxuXHRcdFx0Ly8gSWYgdGhlIG9mZnNldCBudW1iZXIgaXMgZXF1YWwgb3IgbGVzcywgYnJlYWsgdGhlIGxvb3AuXG5cdFx0XHRjb25zdCBzaWJsaW5nT2Zmc2V0ID0gdGhpcy5nZXRCdWxsZXRQb2ludE5yKHNpYmxpbmcpO1xuXHRcdFx0aWYgKHJvb3RPZmZzZXQgPj0gc2libGluZ09mZnNldClcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdC8vIEluY3JlbWVudCB0aGUgc2libGluZ3MgY291bnQuXG5cdFx0XHRzaWJsaW5nQ291bnQrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gc2libGluZ0NvdW50O1xuXHR9XG5cblx0Y29udmVydEpzb25Ub0Zyb250bWF0dGVyKG9iaiwgcGVuZGluZ05ld2xpbmU6IGJvb2xlYW4gPSB0cnVlKSB7XG5cdFx0bGV0IGZyb250bWF0dGVyQXJyID0gT2JqZWN0LmtleXMob2JqKS5tYXAoKGtleSkgPT4gYCR7a2V5fTogJHtvYmpba2V5XX1gKTtcblx0XHRmcm9udG1hdHRlckFyci5wdXNoKFwiLS0tXCIpO1xuXHRcdGZyb250bWF0dGVyQXJyLnVuc2hpZnQoXCItLS1cIik7XG5cdFx0bGV0IGZyb250bWF0dGVyVGV4dCA9IGZyb250bWF0dGVyQXJyLmpvaW4oXCJcXG5cIilcblx0XHRyZXR1cm4gcGVuZGluZ05ld2xpbmVcblx0XHRcdD8gZnJvbnRtYXR0ZXJUZXh0ICsgXCJcXG5cIlxuXHRcdFx0OiBmcm9udG1hdHRlclRleHQ7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuY2xhc3MgQnVsbGV0UG9pbnRJc29sYXRvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KCdXb2FoIScpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgQnVsbGV0UG9pbnRJc29sYXRvclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBCdWxsZXRQb2ludElzb2xhdG9yO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEJ1bGxldFBvaW50SXNvbGF0b3IpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnU2V0dGluZ3MgZm9yIG15IGF3ZXNvbWUgcGx1Z2luLid9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1NldHRpbmcgIzEnKVxuXHRcdFx0LnNldERlc2MoJ0l0XFwncyBhIHNlY3JldCcpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHNlY3JldCcpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnU2VjcmV0OiAnICsgdmFsdWUpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7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
