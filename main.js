/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BulletPointIsolator
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  isolationFileName: "isolation.md",
  isolationFileFolder: "/",
  isolationFilePath: "isolation.md"
};
var needsWriteBackUnloadEvent = true;
var lastOpenFilePath;
var BulletPointIsolator = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon("dice", "BulletPointIsolator Plugin", (evt) => {
      new import_obsidian.Notice("Bullet Point Isolator.");
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "bullet-point-isolator-isolate",
      name: "Isolate"
      // editorCallback: async (editor: Editor, ctx: MarkdownView | MarkdownFileInfo) => {
      // 	new Notice("Bullet Point Isolator: Isolation activated per command.");
      // 	// Write back.
      // 	await this.writeBackModifiedBulletPoint(null, true);
      // }
    });
    this.addCommand({
      id: "bullet-point-isolator-write-back",
      name: "Write Back",
      editorCallback: async (editor, ctx) => {
        var _a;
        if (needsWriteBackUnloadEvent) {
          if (((_a = ctx.file) == null ? void 0 : _a.path) === this.settings.isolationFilePath) {
            new import_obsidian.Notice("Bullet Point Isolator: Write Back activated per command.");
            await this.writeBackModifiedBulletPoint(null, true);
          }
        }
      }
    });
    this.addSettingTab(new BulletPointIsolatorSettingTab(this.app, this));
    this.app.workspace.on("file-open", async (openedFile) => {
      if (!lastOpenFilePath)
        lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      if (needsWriteBackUnloadEvent) {
        if (lastOpenFilePath === this.settings.isolationFilePath && (openedFile == null ? void 0 : openedFile.path) !== this.settings.isolationFilePath) {
          const isolationFile = this.app.vault.getFiles().find((file) => file.path === this.settings.isolationFilePath);
          if (isolationFile) {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated automatically.");
            await this.writeBackModifiedBulletPoint(null, false);
          }
        }
      }
      lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      needsWriteBackUnloadEvent = true;
    });
    this.registerDomEvent(document, "click", async (evt) => {
      var _a, _b, _c;
      const currentEditor = this.app.workspace.activeEditor;
      const focusLine = (_a = currentEditor == null ? void 0 : currentEditor.editor) == null ? void 0 : _a.getCursor().line;
      const focusLineContent = (_b = currentEditor == null ? void 0 : currentEditor.editor) == null ? void 0 : _b.getLine(focusLine);
      if (evt.altKey && evt.ctrlKey && this.checkIsBulletPoint(focusLineContent)) {
        const fileOriginPath = (_c = currentEditor == null ? void 0 : currentEditor.file) == null ? void 0 : _c.path;
        if (!fileOriginPath) {
          this.showFailNotice("File origin is either null or undefined.");
        } else {
          if (fileOriginPath === this.settings.isolationFilePath) {
            new import_obsidian.Notice("Bullet Point Isolator: Write back activated manually.");
            await this.writeBackModifiedBulletPoint(evt, true);
          } else {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated manually.");
            await this.isolateBulletPoint();
          }
        }
      }
    });
  }
  async openFileWithoutEvent(file) {
    needsWriteBackUnloadEvent = false;
    await this.app.workspace.getLeaf().openFile(file);
    needsWriteBackUnloadEvent = true;
  }
  // // Here I need to find out what element type we are dealing with and return it or null.
  // checkMdElement(text: string) {
  // }
  checkIsBulletPoint(text) {
    return text.trim().startsWith("- ");
  }
  extractBulletPoints(lines, startLine, normalized) {
    lines.splice(0, startLine);
    const firstLine = lines.shift();
    const firstOffset = firstLine == null ? void 0 : firstLine.match(/^\t*/)[0].length;
    let bullets = [firstLine];
    for (let lineNr in lines) {
      const lineOffset = lines[lineNr].match(/^\t*/)[0].length;
      const isBulletPoint = lines[lineNr].trim().startsWith("- ");
      if (!isBulletPoint || lineOffset <= firstOffset) {
        break;
      }
      bullets.push(lines[lineNr]);
    }
    return {
      "bullets": normalized ? bullets.map((b) => b.substring(firstOffset)) : bullets,
      "offset": firstOffset
    };
  }
  async isolateBulletPoint() {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const focusFilePath = (_b = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const focusLineNr = (_d = (_c = this.app.workspace.activeEditor) == null ? void 0 : _c.editor) == null ? void 0 : _d.getCursor().line;
    if (!focusLineNr) {
      this.showFailNotice("No line in focus.");
      return;
    }
    const focusLineContent = (_f = (_e = this.app.workspace.activeEditor) == null ? void 0 : _e.editor) == null ? void 0 : _f.getLine(focusLineNr);
    const isBulletPoint = this.checkIsBulletPoint(focusLineContent);
    if (!isBulletPoint) {
      this.showFailNotice("Not a supported MarkDown element.");
      return;
    }
    const focusFile = this.app.vault.getFiles().find((file) => file.path === focusFilePath);
    if (!focusFile) {
      this.showFailNotice("Focus file doesn't exist.");
      return;
    }
    const focusFileContent = await this.app.vault.read(focusFile);
    const focusFileLines = focusFileContent.split("\n");
    const extractedBulletPoints = this.extractBulletPoints(focusFileLines, focusLineNr, true);
    const frontmatterLines = [
      "---",
      `origin: ${(_h = (_g = this.app.workspace.activeEditor) == null ? void 0 : _g.file) == null ? void 0 : _h.path}`,
      `startLine: ${focusLineNr}`,
      `endLine: ${focusLineNr + extractedBulletPoints.bullets.length - 1}`,
      `offset: ${extractedBulletPoints.offset}`,
      "---"
    ];
    const contentToIsolate = [...frontmatterLines, ...extractedBulletPoints.bullets].join("\n");
    const isolatedFileAbstract = this.app.vault.getAbstractFileByPath(this.settings.isolationFilePath);
    if (isolatedFileAbstract)
      this.app.vault.delete(isolatedFileAbstract);
    const isolatedFile = await this.app.vault.create(this.settings.isolationFilePath, contentToIsolate);
    await this.app.workspace.getLeaf().openFile(isolatedFile);
  }
  async writeBackModifiedBulletPoint(evt, openOriginFileAfter) {
    var _a;
    if (evt) {
      const currentEditor = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.editor;
      const focusLine = currentEditor == null ? void 0 : currentEditor.getCursor().line;
      const focusLineContent = currentEditor == null ? void 0 : currentEditor.getLine(focusLine);
      const bulletPointNr = this.checkIsBulletPoint(focusLineContent);
      if (bulletPointNr === null) {
        this.showFailNotice("Line in focus doesn't have bullet point.");
        return;
      } else if (this.extractBulletPoints([focusLineContent], 0, true).offset !== 0) {
        this.showFailNotice("Line in focus isn't root bullet point.");
        return;
      }
    }
    const isolationFile = this.app.vault.getFiles().find((file) => file.path === this.settings.isolationFilePath);
    if (!isolationFile) {
      this.showFailNotice("No isolation file.");
      return;
    }
    const isolationFileContent = await this.app.vault.read(isolationFile);
    let isolationFileFm;
    await this.app.fileManager.processFrontMatter(isolationFile, (frontmatter) => isolationFileFm = frontmatter).catch((_) => this.showFailNotice("Processing frontmatter."));
    if (!isolationFileFm) {
      this.showFailNotice("Couldn't process frontmatter.");
      return;
    }
    const frontmatterMatch = isolationFileContent.match(/^---\n([\s\S]*?)\n---\n/);
    if (!frontmatterMatch) {
      this.showFailNotice("No text to write back from the isolation file.");
      return;
    }
    const isolationFileText = isolationFileContent.replace(frontmatterMatch[0], "");
    const isolationFileLines = isolationFileText.split("\n");
    const offsetIsolationFileLines = isolationFileLines.map((line) => "	".repeat(isolationFileFm.offset) + line);
    const originFilePath = isolationFileFm.origin;
    const originFile = this.app.vault.getFiles().find((file) => file.path === originFilePath);
    if (!originFile) {
      this.showFailNotice("Origin file doesn't exist.");
    }
    const originFileContent = await this.app.vault.read(originFile);
    const originFileLines = originFileContent.split("\n");
    const originLinesToRemoveRange = isolationFileFm.endLine + 1 - isolationFileFm.startLine;
    originFileLines.splice(isolationFileFm.startLine, originLinesToRemoveRange, ...offsetIsolationFileLines);
    const modifiedOriginContent = originFileLines.join("\n");
    await this.app.vault.modify(originFile, modifiedOriginContent);
    if (openOriginFileAfter) {
      needsWriteBackUnloadEvent = false;
      await this.app.workspace.getLeaf().openFile(originFile);
    }
    await this.app.vault.delete(this.app.vault.getAbstractFileByPath(this.settings.isolationFilePath));
  }
  showFailNotice(msg) {
    new import_obsidian.Notice("BulletPointIsolation failed: " + msg);
  }
  convertJsonToFrontmatter(obj, pendingNewline = true) {
    let frontmatterArr = Object.keys(obj).map((key) => `${key}: ${obj[key]}`);
    frontmatterArr.push("---");
    frontmatterArr.unshift("---");
    let frontmatterText = frontmatterArr.join("\n");
    return pendingNewline ? frontmatterText + "\n" : frontmatterText;
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var BulletPointIsolatorSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateIsolationFilePath() {
    this.plugin.settings.isolationFilePath = this.plugin.settings.isolationFileFolder === "/" ? this.plugin.settings.isolationFileName : this.plugin.settings.isolationFileFolder + this.plugin.settings.isolationFileName;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Bullet Point Isolator Plugin - Settings" });
    new import_obsidian.Setting(containerEl).setName("Isolation file name").setDesc("The name of the isolation file.").addText((text) => text.setPlaceholder("The name of the isolation file.").setValue(this.plugin.settings.isolationFileName).onChange(async (value) => {
      this.plugin.settings.isolationFileName = value;
      this.updateIsolationFilePath();
      console.log(this.plugin.settings);
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Isolation file folder path").setDesc("The path where the isolation file should be created.").addDropdown((dropdown) => {
      const folders = this.app.vault.getFiles().map((file) => {
        var _a;
        return (_a = file.parent) == null ? void 0 : _a.path;
      }).unique();
      folders.forEach((folder) => dropdown.addOption(folder, folder));
      dropdown.setValue(this.plugin.settings.isolationFileFolder).onChange(async (value) => {
        this.plugin.settings.isolationFileFolder = value;
        this.updateIsolationFilePath();
        console.log(this.plugin.settings);
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBFZGl0b3JQb3NpdGlvbiwgVGV4dEZpbGVWaWV3LCBEYXRhV3JpdGVPcHRpb25zLCBURmlsZSwgVEFic3RyYWN0RmlsZSwgTWFya2Rvd25GaWxlSW5mbyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHN0YXJ0IH0gZnJvbSAncmVwbCc7XG5cblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmludGVyZmFjZSBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ3Mge1xuXHRpc29sYXRpb25GaWxlTmFtZTogc3RyaW5nO1xuXHRpc29sYXRpb25GaWxlRm9sZGVyOiBzdHJpbmc7XG5cdGlzb2xhdGlvbkZpbGVQYXRoOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5ncyA9IHtcblx0aXNvbGF0aW9uRmlsZU5hbWU6IFwiaXNvbGF0aW9uLm1kXCIsXG5cdGlzb2xhdGlvbkZpbGVGb2xkZXI6IFwiL1wiLFxuXHRpc29sYXRpb25GaWxlUGF0aDogXCJpc29sYXRpb24ubWRcIlxufVxuXG5cbmxldCBuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcbmxldCBsYXN0T3BlbkZpbGVQYXRoO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXRQb2ludElzb2xhdG9yIGV4dGVuZHMgUGx1Z2luIHtcblx0XG5cdHNldHRpbmdzOiBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFwiZGljZVwiLCBcIkJ1bGxldFBvaW50SXNvbGF0b3IgUGx1Z2luXCIsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdC8vIENhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgaWNvbi5cblx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3IuXCIpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKFwibXktcGx1Z2luLXJpYmJvbi1jbGFzc1wiKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgaXRlbSB0byB0aGUgYm90dG9tIG9mIHRoZSBhcHAuIERvZXMgbm90IHdvcmsgb24gbW9iaWxlIGFwcHMuXG5cdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG5cdFx0c3RhdHVzQmFySXRlbUVsLnNldFRleHQoXCJTdGF0dXMgQmFyIFRleHRcIik7XG5cblx0XHQvLyBUcmlnZ2VycyBpc29sYXRpb24uXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImJ1bGxldC1wb2ludC1pc29sYXRvci1pc29sYXRlXCIsXG5cdFx0XHRuYW1lOiBcIklzb2xhdGVcIixcblx0XHRcdC8vIGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xuXG5cdFx0XHQvLyBcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3I6IElzb2xhdGlvbiBhY3RpdmF0ZWQgcGVyIGNvbW1hbmQuXCIpO1xuXG5cdFx0XHQvLyBcdC8vIFdyaXRlIGJhY2suXG5cdFx0XHQvLyBcdGF3YWl0IHRoaXMud3JpdGVCYWNrTW9kaWZpZWRCdWxsZXRQb2ludChudWxsLCB0cnVlKTtcblx0XHRcdC8vIH1cblx0XHR9KTtcblxuXHRcdC8vIFRyaWdnZXJzIHdyaXRpbmcgYmFjay5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiYnVsbGV0LXBvaW50LWlzb2xhdG9yLXdyaXRlLWJhY2tcIixcblx0XHRcdG5hbWU6IFwiV3JpdGUgQmFja1wiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgY3R4OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGlzIGN1cnJlbnRseSBibG9ja2VkLlxuXHRcdFx0XHRpZiAobmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCkge1xuXG5cdFx0XHRcdFx0Ly8gQ2hlY2tzIHRoYXQgd2UganVzdCBzd2l0Y2hlZCBmcm9tIHRoZSBpc29sYXRpb24gZmlsZSB0byBhbm90aGVyIGZpbGUuXG5cdFx0XHRcdFx0aWYgKGN0eC5maWxlPy5wYXRoID09PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKSB7XG5cblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3I6IFdyaXRlIEJhY2sgYWN0aXZhdGVkIHBlciBjb21tYW5kLlwiKTtcblxuXHRcdFx0XHRcdFx0Ly8gV3JpdGUgYmFjay5cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVCYWNrTW9kaWZpZWRCdWxsZXRQb2ludChudWxsLCB0cnVlKTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyBTZXQgdGhlIG9uIGZpbGUtb3BlbiBldmVudCB0aGF0IGNoZWNrcyBpZiB3ZSB3YW50IHRvIHdyaXRlIGJhY2sgdGhlIGJ1bGxldCBwb2ludC5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgYXN5bmMgKG9wZW5lZEZpbGUpID0+IHtcblxuXHRcdFx0Ly8gU2V0IHRoZSBsYXN0IG9wZW5lZCBmaWxlIHRvIHRoZSBjdXJyZW50IGZpbGUuXG5cdFx0XHRpZiAoIWxhc3RPcGVuRmlsZVBhdGgpXG5cdFx0XHRcdGxhc3RPcGVuRmlsZVBhdGggPSBvcGVuZWRGaWxlPy5wYXRoO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGlzIGN1cnJlbnRseSBibG9ja2VkLlxuXHRcdFx0aWYgKG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQpIHtcblxuXHRcdFx0XHQvLyBDaGVja3MgdGhhdCB3ZSBqdXN0IHN3aXRjaGVkIGZyb20gdGhlIGlzb2xhdGlvbiBmaWxlIHRvIGFub3RoZXIgZmlsZS5cblx0XHRcdFx0aWYgKGxhc3RPcGVuRmlsZVBhdGggPT09IHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGggJiYgb3BlbmVkRmlsZT8ucGF0aCAhPT0gdGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCkge1xuXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgdGhhdCB0aGUgaXNvbGF0aW9uIGZpbGUgZXhpc3RzLlxuXHRcdFx0XHRcdGNvbnN0IGlzb2xhdGlvbkZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGggPT09IHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgpO1xuXHRcdFx0XHRcdGlmIChpc29sYXRpb25GaWxlKSB7XG5cblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3I6IElzb2xhdGlvbiBhY3RpdmF0ZWQgYXV0b21hdGljYWxseS5cIik7XG5cblx0XHRcdFx0XHRcdC8vIFdyaXRlIGJhY2suXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQmFja01vZGlmaWVkQnVsbGV0UG9pbnQobnVsbCwgZmFsc2UpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBuZXcgbGFzdCBvcGVuZWQgZmlsZSBwYXRoIHRvIHRoZSBjdXJyZW50bHkgb3BlbmVkIGZpbGUuXG5cdFx0XHRsYXN0T3BlbkZpbGVQYXRoID0gb3BlbmVkRmlsZT8ucGF0aDtcblx0XHRcdG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQgPSB0cnVlO1xuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgYSBET00gb25jbGljayBldmVudCBmb3IgaWYgaXNvbGF0ZSBvciB3cml0ZSBiYWNrIGEgYnVsbGV0IHBvaW50LlxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXG5cdFx0XHQvLyBHZXQgY3VycmVudCBmaWxlIGxpbmUuXG5cdFx0XHRjb25zdCBjdXJyZW50RWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcjtcblx0XHRcdGNvbnN0IGZvY3VzTGluZSA9IGN1cnJlbnRFZGl0b3I/LmVkaXRvcj8uZ2V0Q3Vyc29yKCkubGluZTtcblx0XHRcdGNvbnN0IGZvY3VzTGluZUNvbnRlbnQgPSBjdXJyZW50RWRpdG9yPy5lZGl0b3I/LmdldExpbmUoZm9jdXNMaW5lKTtcblxuXHRcdFx0aWYgKGV2dC5hbHRLZXkgJiYgZXZ0LmN0cmxLZXkgJiYgdGhpcy5jaGVja0lzQnVsbGV0UG9pbnQoZm9jdXNMaW5lQ29udGVudCkpIHtcblxuXHRcdFx0XHQvLyBHZXQgc29tZSBpbmZvcyBhYm91dCB0aGUgZmlsZSBpbiBmb2N1cy5cblx0XHRcdFx0Y29uc3QgZmlsZU9yaWdpblBhdGggPSBjdXJyZW50RWRpdG9yPy5maWxlPy5wYXRoO1xuXG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoZSBmaWxlIGlzIGRlZmluZWQgb3Igbm90LlxuXHRcdFx0XHRpZiAoIWZpbGVPcmlnaW5QYXRoKSB7XG5cblx0XHRcdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiRmlsZSBvcmlnaW4gaXMgZWl0aGVyIG51bGwgb3IgdW5kZWZpbmVkLlwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSBvcmlnaW4gaXMgYW55IGZpbGUgb3IgdGhlIGlzb2xhdGlvbiBmaWxlLlxuXHRcdFx0XHRcdGlmIChmaWxlT3JpZ2luUGF0aCA9PT0gdGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCkge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkJ1bGxldCBQb2ludCBJc29sYXRvcjogV3JpdGUgYmFjayBhY3RpdmF0ZWQgbWFudWFsbHkuXCIpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUJhY2tNb2RpZmllZEJ1bGxldFBvaW50KGV2dCwgdHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkJ1bGxldCBQb2ludCBJc29sYXRvcjogSXNvbGF0aW9uIGFjdGl2YXRlZCBtYW51YWxseS5cIik7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmlzb2xhdGVCdWxsZXRQb2ludCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdH1cblx0XG5cblx0YXN5bmMgb3BlbkZpbGVXaXRob3V0RXZlbnQoZmlsZTogVEZpbGUgfCBUQWJzdHJhY3RGaWxlKSB7XG5cdFx0bmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCA9IGZhbHNlO1xuXHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZSk7XG5cdFx0bmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCA9IHRydWU7XG5cdH1cblxuXHQvLyAvLyBIZXJlIEkgbmVlZCB0byBmaW5kIG91dCB3aGF0IGVsZW1lbnQgdHlwZSB3ZSBhcmUgZGVhbGluZyB3aXRoIGFuZCByZXR1cm4gaXQgb3IgbnVsbC5cblx0Ly8gY2hlY2tNZEVsZW1lbnQodGV4dDogc3RyaW5nKSB7XG5cblx0Ly8gfVxuXG5cdGNoZWNrSXNCdWxsZXRQb2ludCh0ZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGV4dC50cmltKCkuc3RhcnRzV2l0aChcIi0gXCIpO1xuXHR9XG5cblx0ZXh0cmFjdEJ1bGxldFBvaW50cyhsaW5lczogc3RyaW5nW10sIHN0YXJ0TGluZTogbnVtYmVyLCBub3JtYWxpemVkOiBib29sZWFuKSB7XG5cdFx0XG5cdFx0Ly8gUmVtb3ZlIHRoZSBmaXJzdCBudW1iZXIgb2YgbGluZXMgZnJvbSB0aGUgbWFpbiBjb250ZW50XG5cdFx0bGluZXMuc3BsaWNlKDAsIHN0YXJ0TGluZSk7XHRcdFxuXG5cdFx0Ly8gR2V0IHRoZSBmaXJzdCBsaW5lIGFuZCBpdHMgb2Zmc2V0IGluIHRlcm1zIG9mIHRhYnMuXG5cdFx0Y29uc3QgZmlyc3RMaW5lID0gbGluZXMuc2hpZnQoKTtcblx0XHRjb25zdCBmaXJzdE9mZnNldCA9IGZpcnN0TGluZT8ubWF0Y2goL15cXHQqLylbMF0ubGVuZ3RoO1xuXG5cdFx0Ly8gR28gdGhyb3VnaCBhbGwgZm9sbG93aW5nIGxpbmVzIHVudGlsIG9uZSBpbiBub3QgYSBidWxsZXQgcG9pbnQgb3Igc3RhcnRzIHdpdGggZXF1YWwgb3IgbGVzcyB0YWJzLlxuXHRcdGxldCBidWxsZXRzID0gW2ZpcnN0TGluZV07XG5cdFx0Zm9yIChsZXQgbGluZU5yIGluIGxpbmVzKSB7XG5cdFx0XHRjb25zdCBsaW5lT2Zmc2V0ID0gbGluZXNbbGluZU5yXS5tYXRjaCgvXlxcdCovKVswXS5sZW5ndGg7XG5cdFx0XHRjb25zdCBpc0J1bGxldFBvaW50ID0gbGluZXNbbGluZU5yXS50cmltKCkuc3RhcnRzV2l0aChcIi0gXCIpO1xuXHRcdFx0aWYgKCFpc0J1bGxldFBvaW50IHx8IGxpbmVPZmZzZXQgPD0gZmlyc3RPZmZzZXQpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRidWxsZXRzLnB1c2gobGluZXNbbGluZU5yXSk7XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiB7XG5cdFx0XHRcImJ1bGxldHNcIjogbm9ybWFsaXplZCA/IGJ1bGxldHMubWFwKGIgPT4gYi5zdWJzdHJpbmcoZmlyc3RPZmZzZXQpKSA6IGJ1bGxldHMsXG5cdFx0XHRcIm9mZnNldFwiOiBmaXJzdE9mZnNldFxuXHRcdH07XG5cdH1cblxuXHRhc3luYyBpc29sYXRlQnVsbGV0UG9pbnQoKSB7XG5cblx0XHQvLyBjb25zdCBjdXJyZW50Rm9jdXNMaW5lID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yPy5nZXRDdXJzb3IoKS5saW5lO1xuXHRcdGNvbnN0IGZvY3VzRmlsZVBhdGggPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5maWxlPy5wYXRoO1xuXHRcdFxuXHRcdC8vIEEgc2VsZWN0ZWQgbGluZSBpcyByZXF1aXJlZC5cblx0XHRjb25zdCBmb2N1c0xpbmVOciA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRvcj8uZ2V0Q3Vyc29yKCkubGluZTtcblx0XHRpZiAoIWZvY3VzTGluZU5yKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiTm8gbGluZSBpbiBmb2N1cy5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIENoZWNrIGlmIGxpbmUgaXMgYSBzdXBwb3J0ZWQgbWFya2Rvd24gZWxlbWVudC5cblx0XHRjb25zdCBmb2N1c0xpbmVDb250ZW50ID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yPy5nZXRMaW5lKGZvY3VzTGluZU5yKTtcblx0XHRjb25zdCBpc0J1bGxldFBvaW50ID0gdGhpcy5jaGVja0lzQnVsbGV0UG9pbnQoZm9jdXNMaW5lQ29udGVudCk7XG5cdFx0aWYgKCFpc0J1bGxldFBvaW50KSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiTm90IGEgc3VwcG9ydGVkIE1hcmtEb3duIGVsZW1lbnQuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdldCB0aGUgZm9jdXMgZmlsZS5cblx0XHRjb25zdCBmb2N1c0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGggPT09IGZvY3VzRmlsZVBhdGgpO1xuXHRcdGlmICghZm9jdXNGaWxlKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiRm9jdXMgZmlsZSBkb2Vzbid0IGV4aXN0LlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHZXQgYWxsIHRoZSBidWxsZXQgYW5kIHN1YmJ1bGxldCBwb2ludHMuXG5cdFx0Y29uc3QgZm9jdXNGaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZm9jdXNGaWxlKTtcblx0XHRjb25zdCBmb2N1c0ZpbGVMaW5lcyA9IGZvY3VzRmlsZUNvbnRlbnQuc3BsaXQoXCJcXG5cIik7XG5cdFx0Y29uc3QgZXh0cmFjdGVkQnVsbGV0UG9pbnRzID0gdGhpcy5leHRyYWN0QnVsbGV0UG9pbnRzKGZvY3VzRmlsZUxpbmVzLCBmb2N1c0xpbmVOciwgdHJ1ZSk7XG5cblx0XHQvLyBDcmVhdGUgdGhlIGZyb250bWF0dGVyLlxuXHRcdGNvbnN0IGZyb250bWF0dGVyTGluZXMgPSBbXG5cdFx0XHRcIi0tLVwiLFxuXHRcdFx0YG9yaWdpbjogJHt0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5maWxlPy5wYXRofWAsXG5cdFx0XHRgc3RhcnRMaW5lOiAke2ZvY3VzTGluZU5yfWAsXG5cdFx0XHRgZW5kTGluZTogJHtmb2N1c0xpbmVOciArIGV4dHJhY3RlZEJ1bGxldFBvaW50cy5idWxsZXRzLmxlbmd0aCAtIDF9YCxcblx0XHRcdGBvZmZzZXQ6ICR7ZXh0cmFjdGVkQnVsbGV0UG9pbnRzLm9mZnNldH1gLFxuXHRcdFx0XCItLS1cIlxuXHRcdF1cblxuXHRcdC8vIEpvaW4gdGhlIGxpbmVzIHRvIHVzZSB0aGVtIGluc2lkZSB0aGUgY3JlYXRlIGZ1bmN0aW9uIGxhdGVyLlxuXHRcdGNvbnN0IGNvbnRlbnRUb0lzb2xhdGUgPSBbLi4uZnJvbnRtYXR0ZXJMaW5lcywgLi4uZXh0cmFjdGVkQnVsbGV0UG9pbnRzLmJ1bGxldHNdLmpvaW4oXCJcXG5cIik7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHRlbXBvcmFyeSBmaWxlIGlmIGl0IGRvZXNudCBleGlzdCBvdGhlcndpc2UgZGVsZXRlIGl0IGZpcnN0LlxuXHRcdGNvbnN0IGlzb2xhdGVkRmlsZUFic3RyYWN0ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgpO1xuXHRcdGlmIChpc29sYXRlZEZpbGVBYnN0cmFjdClcblx0XHRcdHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShpc29sYXRlZEZpbGVBYnN0cmFjdCk7XG5cblx0XHQvLyBXcml0ZSB0aGUgYnVsbGV0cyB0byB0aGUgdGVtcG9yYXJ5IGZpbGUuXG5cdFx0Y29uc3QgaXNvbGF0ZWRGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgsIGNvbnRlbnRUb0lzb2xhdGUpO1xuXG5cdFx0Ly8gQ3JlYXRlIG5ldyBsZWFmIGFuZCBvcGVuIGEgZmlsZSB0aGVyZS5cblx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGlzb2xhdGVkRmlsZSk7XG5cblx0fVxuXG5cdGFzeW5jIHdyaXRlQmFja01vZGlmaWVkQnVsbGV0UG9pbnQoZXZ0OiBNb3VzZUV2ZW50IHwgbnVsbCwgb3Blbk9yaWdpbkZpbGVBZnRlcjogYm9vbGVhbikge1xuXG5cdFx0Ly8gQ2hlY2sgdGhlIGV2ZW50IHRhcmdldCBpZiBhbiBldmVudCBpcyBzdXBwbGllZC5cblx0XHRpZiAoZXZ0KSB7XG5cblx0XHRcdC8vIElmIGV2ZW50IHRoZW4gdGhlcmUgbXVzdCBiZSBhIGxpbmUgaW4gZm9jdXMuXG5cdFx0XHRjb25zdCBjdXJyZW50RWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yO1xuXHRcdFx0Y29uc3QgZm9jdXNMaW5lID0gY3VycmVudEVkaXRvcj8uZ2V0Q3Vyc29yKCkubGluZTtcblx0XHRcdGNvbnN0IGZvY3VzTGluZUNvbnRlbnQgPSBjdXJyZW50RWRpdG9yPy5nZXRMaW5lKGZvY3VzTGluZSk7XG5cdFx0XHRcblx0XHRcdC8vIFRvIHRyaWdnZXIgYSB3cml0ZSBiYWNrIHdpdGggYSBtb3VzZSBldmVudCB0aGUgdXNlciBtdXN0IGNsaWNrIG9uIGEgYnVsbGV0IHBvaW50LlxuXHRcdFx0Y29uc3QgYnVsbGV0UG9pbnROciA9IHRoaXMuY2hlY2tJc0J1bGxldFBvaW50KGZvY3VzTGluZUNvbnRlbnQpO1xuXHRcdFx0aWYgKGJ1bGxldFBvaW50TnIgPT09IG51bGwpIHtcblx0XHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkxpbmUgaW4gZm9jdXMgZG9lc24ndCBoYXZlIGJ1bGxldCBwb2ludC5cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHRoaXMuZXh0cmFjdEJ1bGxldFBvaW50cyhbZm9jdXNMaW5lQ29udGVudF0sIDAsIHRydWUpLm9mZnNldCAhPT0gMCkge1xuXHRcdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiTGluZSBpbiBmb2N1cyBpc24ndCByb290IGJ1bGxldCBwb2ludC5cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdH1cblxuXHRcdC8vIENoZWNrIGFuZCBmaW5kIHRoZSBpc29sYXRpb24gZmlsZSBhbmQgZ2V0IGl0cyBjb250ZW50LlxuXHRcdGNvbnN0IGlzb2xhdGlvbkZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGggPT09IHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgpO1xuXHRcdGlmICghaXNvbGF0aW9uRmlsZSkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIk5vIGlzb2xhdGlvbiBmaWxlLlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgaXNvbGF0aW9uRmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGlzb2xhdGlvbkZpbGUpO1xuXG5cdFx0Ly8gRXh0cmFjdCB0aGUgZnJvbnRtYXR0ZXIgZnJvbSB0aGUgaXNvbGF0aW9uIGZpbGUuXG5cdFx0bGV0IGlzb2xhdGlvbkZpbGVGbTtcblx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlclxuXHRcdFx0LnByb2Nlc3NGcm9udE1hdHRlcihpc29sYXRpb25GaWxlLCAoZnJvbnRtYXR0ZXIpID0+IGlzb2xhdGlvbkZpbGVGbSA9IGZyb250bWF0dGVyKVxuXHRcdFx0LmNhdGNoKF8gPT4gdGhpcy5zaG93RmFpbE5vdGljZShcIlByb2Nlc3NpbmcgZnJvbnRtYXR0ZXIuXCIpKTtcblx0XHRpZiAoIWlzb2xhdGlvbkZpbGVGbSkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkNvdWxkbid0IHByb2Nlc3MgZnJvbnRtYXR0ZXIuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEV4dHJhY3QgdGhlIGNvbnRlbnRzIHRvIHdyaXRlIGJhY2sgZnJvbSB0aGUgaXNvbGF0aW9uIGZpbGUuXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGlzb2xhdGlvbkZpbGVDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuLyk7XG5cdFx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiTm8gdGV4dCB0byB3cml0ZSBiYWNrIGZyb20gdGhlIGlzb2xhdGlvbiBmaWxlLlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgaXNvbGF0aW9uRmlsZVRleHQgPSBpc29sYXRpb25GaWxlQ29udGVudC5yZXBsYWNlKGZyb250bWF0dGVyTWF0Y2hbMF0sIFwiXCIpO1xuXHRcdGNvbnN0IGlzb2xhdGlvbkZpbGVMaW5lcyA9IGlzb2xhdGlvbkZpbGVUZXh0LnNwbGl0KFwiXFxuXCIpO1xuXG5cdFx0Ly8gQXBwbHkgdGhlIG9mZnNldC5cblx0XHRjb25zdCBvZmZzZXRJc29sYXRpb25GaWxlTGluZXMgPSBpc29sYXRpb25GaWxlTGluZXMubWFwKGxpbmUgPT4gXCJcXHRcIi5yZXBlYXQoaXNvbGF0aW9uRmlsZUZtLm9mZnNldCkgKyBsaW5lKTtcblxuXHRcdC8vIENoZWNrIGFuZCBnZXQgdGhlIG9yaWdpbiBmaWxlLlxuXHRcdGNvbnN0IG9yaWdpbkZpbGVQYXRoID0gaXNvbGF0aW9uRmlsZUZtLm9yaWdpbjtcblx0XHRjb25zdCBvcmlnaW5GaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGZpbGUgPT4gZmlsZS5wYXRoID09PSBvcmlnaW5GaWxlUGF0aCk7XG5cdFx0aWYgKCFvcmlnaW5GaWxlKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiT3JpZ2luIGZpbGUgZG9lc24ndCBleGlzdC5cIik7XG5cdFx0XHQvLyByZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFdyaXRlIGJhY2sgdGhlIGlzb2xhdGVkIGNvbnRlbnQgaW50byB0aGUgb3JpZ2luIGZpbGUuXG5cdFx0Y29uc3Qgb3JpZ2luRmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG9yaWdpbkZpbGUpO1xuXHRcdGNvbnN0IG9yaWdpbkZpbGVMaW5lcyA9IG9yaWdpbkZpbGVDb250ZW50LnNwbGl0KFwiXFxuXCIpO1xuXHRcdGNvbnN0IG9yaWdpbkxpbmVzVG9SZW1vdmVSYW5nZSA9IGlzb2xhdGlvbkZpbGVGbS5lbmRMaW5lICsgMSAtIGlzb2xhdGlvbkZpbGVGbS5zdGFydExpbmU7XG5cdFx0b3JpZ2luRmlsZUxpbmVzLnNwbGljZShpc29sYXRpb25GaWxlRm0uc3RhcnRMaW5lLCBvcmlnaW5MaW5lc1RvUmVtb3ZlUmFuZ2UsIC4uLm9mZnNldElzb2xhdGlvbkZpbGVMaW5lcyk7XG5cdFx0Y29uc3QgbW9kaWZpZWRPcmlnaW5Db250ZW50ID0gb3JpZ2luRmlsZUxpbmVzLmpvaW4oXCJcXG5cIik7XG5cblx0XHQvLyBBcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgb3JpZ2luIGZpbGUuXG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KG9yaWdpbkZpbGUsIG1vZGlmaWVkT3JpZ2luQ29udGVudCk7XG5cblx0XHQvLyBPcGVuIHRoZSBvcmlnaW4gZmlsZSBvciB0aGUgZ2l2ZW4gZmlsZSB0byBvcGVuIGFmdGVyLlxuXHRcdGlmIChvcGVuT3JpZ2luRmlsZUFmdGVyKSB7XG5cdFx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gZmFsc2U7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKG9yaWdpbkZpbGUpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBEZWxldGUgdGhlIGlzb2xhdGlvbiBmaWxlLlxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZSh0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCkpO1xuXG5cdH1cblxuXHRzaG93RmFpbE5vdGljZShtc2c6IHN0cmluZykge1xuXHRcdG5ldyBOb3RpY2UoXCJCdWxsZXRQb2ludElzb2xhdGlvbiBmYWlsZWQ6IFwiICsgbXNnKTtcblx0fVxuXG5cdGNvbnZlcnRKc29uVG9Gcm9udG1hdHRlcihvYmosIHBlbmRpbmdOZXdsaW5lOiBib29sZWFuID0gdHJ1ZSkge1xuXHRcdGxldCBmcm9udG1hdHRlckFyciA9IE9iamVjdC5rZXlzKG9iaikubWFwKChrZXkpID0+IGAke2tleX06ICR7b2JqW2tleV19YCk7XG5cdFx0ZnJvbnRtYXR0ZXJBcnIucHVzaChcIi0tLVwiKTtcblx0XHRmcm9udG1hdHRlckFyci51bnNoaWZ0KFwiLS0tXCIpO1xuXHRcdGxldCBmcm9udG1hdHRlclRleHQgPSBmcm9udG1hdHRlckFyci5qb2luKFwiXFxuXCIpXG5cdFx0cmV0dXJuIHBlbmRpbmdOZXdsaW5lXG5cdFx0XHQ/IGZyb250bWF0dGVyVGV4dCArIFwiXFxuXCJcblx0XHRcdDogZnJvbnRtYXR0ZXJUZXh0O1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbmNsYXNzIEJ1bGxldFBvaW50SXNvbGF0b3JNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KCdXb2FoIScpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgQnVsbGV0UG9pbnRJc29sYXRvclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblxuXHRwbHVnaW46IEJ1bGxldFBvaW50SXNvbGF0b3I7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQnVsbGV0UG9pbnRJc29sYXRvcikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdHVwZGF0ZUlzb2xhdGlvbkZpbGVQYXRoKCk6IHZvaWQge1xuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoID0gXG5cdFx0XHQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZUZvbGRlciA9PT0gXCIvXCIpXG5cdFx0XHRcdD8gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZU5hbWVcblx0XHRcdFx0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc29sYXRpb25GaWxlRm9sZGVyICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZU5hbWU7XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7dGV4dDogXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3IgUGx1Z2luIC0gU2V0dGluZ3NcIn0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIklzb2xhdGlvbiBmaWxlIG5hbWVcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIG5hbWUgb2YgdGhlIGlzb2xhdGlvbiBmaWxlLlwiKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIlRoZSBuYW1lIG9mIHRoZSBpc29sYXRpb24gZmlsZS5cIilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVOYW1lKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZU5hbWUgPSB2YWx1ZTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUlzb2xhdGlvbkZpbGVQYXRoKCk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2codGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiSXNvbGF0aW9uIGZpbGUgZm9sZGVyIHBhdGhcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIHBhdGggd2hlcmUgdGhlIGlzb2xhdGlvbiBmaWxlIHNob3VsZCBiZSBjcmVhdGVkLlwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0Y29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkubWFwKGZpbGUgPT4gZmlsZS5wYXJlbnQ/LnBhdGgpLnVuaXF1ZSgpO1xuXHRcdFx0XHRmb2xkZXJzLmZvckVhY2goZm9sZGVyID0+IGRyb3Bkb3duLmFkZE9wdGlvbihmb2xkZXIsIGZvbGRlcikpO1xuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc29sYXRpb25GaWxlRm9sZGVyKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVGb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdHRoaXMudXBkYXRlSXNvbGF0aW9uRmlsZVBhdGgoKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHR9KTtcblxuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQW9MO0FBWXBMLElBQU0sbUJBQWdEO0FBQUEsRUFDckQsbUJBQW1CO0FBQUEsRUFDbkIscUJBQXFCO0FBQUEsRUFDckIsbUJBQW1CO0FBQ3BCO0FBR0EsSUFBSSw0QkFBNEI7QUFDaEMsSUFBSTtBQUVKLElBQXFCLHNCQUFyQixjQUFpRCx1QkFBTztBQUFBLEVBSXZELE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBR3hCLFVBQU0sZUFBZSxLQUFLLGNBQWMsUUFBUSw4QkFBOEIsQ0FBQyxRQUFvQjtBQUVsRyxVQUFJLHVCQUFPLHdCQUF3QjtBQUFBLElBQ3BDLENBQUM7QUFFRCxpQkFBYSxTQUFTLHdCQUF3QjtBQUc5QyxVQUFNLGtCQUFrQixLQUFLLGlCQUFpQjtBQUM5QyxvQkFBZ0IsUUFBUSxpQkFBaUI7QUFHekMsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBUVAsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLE9BQU8sUUFBZ0IsUUFBeUM7QUExRG5GO0FBNkRJLFlBQUksMkJBQTJCO0FBRzlCLGdCQUFJLFNBQUksU0FBSixtQkFBVSxVQUFTLEtBQUssU0FBUyxtQkFBbUI7QUFFdkQsZ0JBQUksdUJBQU8sMERBQTBEO0FBR3JFLGtCQUFNLEtBQUssNkJBQTZCLE1BQU0sSUFBSTtBQUFBLFVBRW5EO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLGNBQWMsSUFBSSw4QkFBOEIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUdwRSxTQUFLLElB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
