/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BulletPointIsolator
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  isolationFileName: "isolation.md",
  isolationFileFolder: "/",
  isolationFilePath: "isolation.md"
};
var needsWriteBackUnloadEvent = true;
var lastOpenFilePath;
var BulletPointIsolator = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon("dice", "BulletPointIsolator Plugin", (evt) => {
      new import_obsidian.Notice("Bullet Point Isolator.");
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "bullet-point-isolator-isolate",
      name: "Isolate",
      editorCallback: async (editor, ctx) => {
        new import_obsidian.Notice("Bullet Point Isolator: Isolation activated per command.");
        await this.isolateBulletPoint();
      }
    });
    this.addCommand({
      id: "bullet-point-isolator-write-back",
      name: "Write Back",
      editorCallback: async (editor, ctx) => {
        var _a;
        if (needsWriteBackUnloadEvent) {
          if (((_a = ctx.file) == null ? void 0 : _a.path) === this.settings.isolationFilePath) {
            new import_obsidian.Notice("Bullet Point Isolator: Write Back activated per command.");
            await this.writeBackModifiedBulletPoint(null, true);
          }
        }
      }
    });
    this.addSettingTab(new BulletPointIsolatorSettingTab(this.app, this));
    this.app.workspace.on("file-open", async (openedFile) => {
      if (!lastOpenFilePath)
        lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      if (needsWriteBackUnloadEvent) {
        if (lastOpenFilePath === this.settings.isolationFilePath && (openedFile == null ? void 0 : openedFile.path) !== this.settings.isolationFilePath) {
          const isolationFile = this.app.vault.getFiles().find((file) => file.path === this.settings.isolationFilePath);
          if (isolationFile) {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated automatically.");
            await this.writeBackModifiedBulletPoint(null, false);
          }
        }
      }
      lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      needsWriteBackUnloadEvent = true;
    });
    this.registerDomEvent(document, "click", async (evt) => {
      var _a, _b, _c;
      const currentEditor = this.app.workspace.activeEditor;
      const focusLine = (_a = currentEditor == null ? void 0 : currentEditor.editor) == null ? void 0 : _a.getCursor().line;
      const focusLineContent = (_b = currentEditor == null ? void 0 : currentEditor.editor) == null ? void 0 : _b.getLine(focusLine);
      if (evt.altKey && evt.ctrlKey && this.checkIsBulletPoint(focusLineContent)) {
        const fileOriginPath = (_c = currentEditor == null ? void 0 : currentEditor.file) == null ? void 0 : _c.path;
        if (!fileOriginPath) {
          this.showFailNotice("File origin is either null or undefined.");
        } else {
          if (fileOriginPath === this.settings.isolationFilePath) {
            new import_obsidian.Notice("Bullet Point Isolator: Write back activated manually.");
            await this.writeBackModifiedBulletPoint(evt, true);
          } else {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated manually.");
            await this.isolateBulletPoint();
          }
        }
      }
    });
  }
  async openFileWithoutEvent(file) {
    needsWriteBackUnloadEvent = false;
    await this.app.workspace.getLeaf().openFile(file);
    needsWriteBackUnloadEvent = true;
  }
  // // Here I need to find out what element type we are dealing with and return it or null.
  // checkMdElement(text: string) {
  // }
  checkIsBulletPoint(text) {
    return text.trim().startsWith("- ");
  }
  extractBulletPoints(lines, startLine, normalized) {
    lines.splice(0, startLine);
    const firstLine = lines.shift();
    const firstOffset = firstLine == null ? void 0 : firstLine.match(/^\t*/)[0].length;
    let bullets = [firstLine];
    for (let lineNr in lines) {
      const lineOffset = lines[lineNr].match(/^\t*/)[0].length;
      const isBulletPoint = lines[lineNr].trim().startsWith("- ");
      if (!isBulletPoint || lineOffset <= firstOffset) {
        break;
      }
      bullets.push(lines[lineNr]);
    }
    return {
      "bullets": normalized ? bullets.map((b) => b.substring(firstOffset)) : bullets,
      "offset": firstOffset
    };
  }
  async isolateBulletPoint() {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const focusFilePath = (_b = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const focusLineNr = (_d = (_c = this.app.workspace.activeEditor) == null ? void 0 : _c.editor) == null ? void 0 : _d.getCursor().line;
    if (focusLineNr === void 0 || focusLineNr < 0) {
      this.showFailNotice("No line in focus.");
      return;
    }
    const focusLineContent = (_f = (_e = this.app.workspace.activeEditor) == null ? void 0 : _e.editor) == null ? void 0 : _f.getLine(focusLineNr);
    const isBulletPoint = this.checkIsBulletPoint(focusLineContent);
    if (!isBulletPoint) {
      this.showFailNotice("Not a supported MarkDown element.");
      return;
    }
    const focusFile = this.app.vault.getFiles().find((file) => file.path === focusFilePath);
    if (!focusFile) {
      this.showFailNotice("Focus file doesn't exist.");
      return;
    }
    const focusFileContent = await this.app.vault.read(focusFile);
    const focusFileLines = focusFileContent.split("\n");
    const extractedBulletPoints = this.extractBulletPoints(focusFileLines, focusLineNr, true);
    const frontmatterLines = [
      "---",
      `origin: ${(_h = (_g = this.app.workspace.activeEditor) == null ? void 0 : _g.file) == null ? void 0 : _h.path}`,
      `startLine: ${focusLineNr}`,
      `endLine: ${focusLineNr + extractedBulletPoints.bullets.length - 1}`,
      `offset: ${extractedBulletPoints.offset}`,
      "---"
    ];
    const contentToIsolate = [...frontmatterLines, ...extractedBulletPoints.bullets].join("\n");
    const isolatedFileAbstract = this.app.vault.getAbstractFileByPath(this.settings.isolationFilePath);
    if (isolatedFileAbstract)
      this.app.vault.delete(isolatedFileAbstract);
    const isolatedFile = await this.app.vault.create(this.settings.isolationFilePath, contentToIsolate);
    await this.app.workspace.getLeaf().openFile(isolatedFile);
  }
  async writeBackModifiedBulletPoint(evt, openOriginFileAfter) {
    var _a;
    if (evt) {
      const currentEditor = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.editor;
      const focusLine = currentEditor == null ? void 0 : currentEditor.getCursor().line;
      const focusLineContent = currentEditor == null ? void 0 : currentEditor.getLine(focusLine);
      const bulletPointNr = this.checkIsBulletPoint(focusLineContent);
      if (bulletPointNr === null) {
        this.showFailNotice("Line in focus doesn't have bullet point.");
        return;
      } else if (this.extractBulletPoints([focusLineContent], 0, true).offset !== 0) {
        this.showFailNotice("Line in focus isn't root bullet point.");
        return;
      }
    }
    const isolationFile = this.app.vault.getFiles().find((file) => file.path === this.settings.isolationFilePath);
    if (!isolationFile) {
      this.showFailNotice("No isolation file.");
      return;
    }
    const isolationFileContent = await this.app.vault.read(isolationFile);
    let isolationFileFm;
    await this.app.fileManager.processFrontMatter(isolationFile, (frontmatter) => isolationFileFm = frontmatter).catch((_) => this.showFailNotice("Processing frontmatter."));
    if (!isolationFileFm) {
      this.showFailNotice("Couldn't process frontmatter.");
      return;
    }
    const frontmatterMatch = isolationFileContent.match(/^---\n([\s\S]*?)\n---\n/);
    if (!frontmatterMatch) {
      this.showFailNotice("No text to write back from the isolation file.");
      return;
    }
    const isolationFileText = isolationFileContent.replace(frontmatterMatch[0], "");
    const isolationFileLines = isolationFileText.split("\n");
    const offsetIsolationFileLines = isolationFileLines.map((line) => "	".repeat(isolationFileFm.offset) + line);
    const originFilePath = isolationFileFm.origin;
    const originFile = this.app.vault.getFiles().find((file) => file.path === originFilePath);
    if (!originFile) {
      this.showFailNotice("Origin file doesn't exist.");
    }
    const originFileContent = await this.app.vault.read(originFile);
    const originFileLines = originFileContent.split("\n");
    const originLinesToRemoveRange = isolationFileFm.endLine + 1 - isolationFileFm.startLine;
    originFileLines.splice(isolationFileFm.startLine, originLinesToRemoveRange, ...offsetIsolationFileLines);
    const modifiedOriginContent = originFileLines.join("\n");
    await this.app.vault.modify(originFile, modifiedOriginContent);
    if (openOriginFileAfter) {
      needsWriteBackUnloadEvent = false;
      await this.app.workspace.getLeaf().openFile(originFile);
    }
    await this.app.vault.delete(this.app.vault.getAbstractFileByPath(this.settings.isolationFilePath));
  }
  showFailNotice(msg) {
    new import_obsidian.Notice("BulletPointIsolation failed: " + msg);
  }
  convertJsonToFrontmatter(obj, pendingNewline = true) {
    let frontmatterArr = Object.keys(obj).map((key) => `${key}: ${obj[key]}`);
    frontmatterArr.push("---");
    frontmatterArr.unshift("---");
    let frontmatterText = frontmatterArr.join("\n");
    return pendingNewline ? frontmatterText + "\n" : frontmatterText;
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var BulletPointIsolatorSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateIsolationFilePath() {
    this.plugin.settings.isolationFilePath = this.plugin.settings.isolationFileFolder === "/" ? this.plugin.settings.isolationFileName : this.plugin.settings.isolationFileFolder + this.plugin.settings.isolationFileName;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Bullet Point Isolator Plugin - Settings" });
    new import_obsidian.Setting(containerEl).setName("Isolation file name").setDesc("The name of the isolation file.").addText((text) => text.setPlaceholder("The name of the isolation file.").setValue(this.plugin.settings.isolationFileName).onChange(async (value) => {
      this.plugin.settings.isolationFileName = value;
      this.updateIsolationFilePath();
      console.log(this.plugin.settings);
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Isolation file folder path").setDesc("The path where the isolation file should be created.").addDropdown((dropdown) => {
      const folders = this.app.vault.getFiles().map((file) => {
        var _a;
        return (_a = file.parent) == null ? void 0 : _a.path;
      }).unique();
      folders.forEach((folder) => dropdown.addOption(folder, folder));
      dropdown.setValue(this.plugin.settings.isolationFileFolder).onChange(async (value) => {
        this.plugin.settings.isolationFileFolder = value;
        this.updateIsolationFilePath();
        console.log(this.plugin.settings);
        await this.plugin.saveSettings();
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBFZGl0b3JQb3NpdGlvbiwgVGV4dEZpbGVWaWV3LCBEYXRhV3JpdGVPcHRpb25zLCBURmlsZSwgVEFic3RyYWN0RmlsZSwgTWFya2Rvd25GaWxlSW5mbyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHN0YXJ0IH0gZnJvbSAncmVwbCc7XG5cblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmludGVyZmFjZSBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ3Mge1xuXHRpc29sYXRpb25GaWxlTmFtZTogc3RyaW5nO1xuXHRpc29sYXRpb25GaWxlRm9sZGVyOiBzdHJpbmc7XG5cdGlzb2xhdGlvbkZpbGVQYXRoOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5ncyA9IHtcblx0aXNvbGF0aW9uRmlsZU5hbWU6IFwiaXNvbGF0aW9uLm1kXCIsXG5cdGlzb2xhdGlvbkZpbGVGb2xkZXI6IFwiL1wiLFxuXHRpc29sYXRpb25GaWxlUGF0aDogXCJpc29sYXRpb24ubWRcIlxufVxuXG5cbmxldCBuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcbmxldCBsYXN0T3BlbkZpbGVQYXRoO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXRQb2ludElzb2xhdG9yIGV4dGVuZHMgUGx1Z2luIHtcblx0XG5cdHNldHRpbmdzOiBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFwiZGljZVwiLCBcIkJ1bGxldFBvaW50SXNvbGF0b3IgUGx1Z2luXCIsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdC8vIENhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgaWNvbi5cblx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3IuXCIpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKFwibXktcGx1Z2luLXJpYmJvbi1jbGFzc1wiKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgaXRlbSB0byB0aGUgYm90dG9tIG9mIHRoZSBhcHAuIERvZXMgbm90IHdvcmsgb24gbW9iaWxlIGFwcHMuXG5cdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG5cdFx0c3RhdHVzQmFySXRlbUVsLnNldFRleHQoXCJTdGF0dXMgQmFyIFRleHRcIik7XG5cblx0XHQvLyBUcmlnZ2VycyBpc29sYXRpb24uXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImJ1bGxldC1wb2ludC1pc29sYXRvci1pc29sYXRlXCIsXG5cdFx0XHRuYW1lOiBcIklzb2xhdGVcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xuXG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3I6IElzb2xhdGlvbiBhY3RpdmF0ZWQgcGVyIGNvbW1hbmQuXCIpO1xuXG5cdFx0XHRcdC8vIElzb2xhdGUuXG5cdFx0XHRcdGF3YWl0IHRoaXMuaXNvbGF0ZUJ1bGxldFBvaW50KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBUcmlnZ2VycyB3cml0aW5nIGJhY2suXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImJ1bGxldC1wb2ludC1pc29sYXRvci13cml0ZS1iYWNrXCIsXG5cdFx0XHRuYW1lOiBcIldyaXRlIEJhY2tcIixcblx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIGN0eDogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBwYXJ0IG9mIHRoZSBldmVudCBpcyBjdXJyZW50bHkgYmxvY2tlZC5cblx0XHRcdFx0aWYgKG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQpIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrcyB0aGF0IHdlIGp1c3Qgc3dpdGNoZWQgZnJvbSB0aGUgaXNvbGF0aW9uIGZpbGUgdG8gYW5vdGhlciBmaWxlLlxuXHRcdFx0XHRcdGlmIChjdHguZmlsZT8ucGF0aCA9PT0gdGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCkge1xuXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBXcml0ZSBCYWNrIGFjdGl2YXRlZCBwZXIgY29tbWFuZC5cIik7XG5cblx0XHRcdFx0XHRcdC8vIFdyaXRlIGJhY2suXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQmFja01vZGlmaWVkQnVsbGV0UG9pbnQobnVsbCwgdHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQnVsbGV0UG9pbnRJc29sYXRvclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIFNldCB0aGUgb24gZmlsZS1vcGVuIGV2ZW50IHRoYXQgY2hlY2tzIGlmIHdlIHdhbnQgdG8gd3JpdGUgYmFjayB0aGUgYnVsbGV0IHBvaW50LlxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZpbGUtb3BlblwiLCBhc3luYyAob3BlbmVkRmlsZSkgPT4ge1xuXG5cdFx0XHQvLyBTZXQgdGhlIGxhc3Qgb3BlbmVkIGZpbGUgdG8gdGhlIGN1cnJlbnQgZmlsZS5cblx0XHRcdGlmICghbGFzdE9wZW5GaWxlUGF0aClcblx0XHRcdFx0bGFzdE9wZW5GaWxlUGF0aCA9IG9wZW5lZEZpbGU/LnBhdGg7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgcGFydCBvZiB0aGUgZXZlbnQgaXMgY3VycmVudGx5IGJsb2NrZWQuXG5cdFx0XHRpZiAobmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCkge1xuXG5cdFx0XHRcdC8vIENoZWNrcyB0aGF0IHdlIGp1c3Qgc3dpdGNoZWQgZnJvbSB0aGUgaXNvbGF0aW9uIGZpbGUgdG8gYW5vdGhlciBmaWxlLlxuXHRcdFx0XHRpZiAobGFzdE9wZW5GaWxlUGF0aCA9PT0gdGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCAmJiBvcGVuZWRGaWxlPy5wYXRoICE9PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayB0aGF0IHRoZSBpc29sYXRpb24gZmlsZSBleGlzdHMuXG5cdFx0XHRcdFx0Y29uc3QgaXNvbGF0aW9uRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmluZChmaWxlID0+IGZpbGUucGF0aCA9PT0gdGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCk7XG5cdFx0XHRcdFx0aWYgKGlzb2xhdGlvbkZpbGUpIHtcblxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkJ1bGxldCBQb2ludCBJc29sYXRvcjogSXNvbGF0aW9uIGFjdGl2YXRlZCBhdXRvbWF0aWNhbGx5LlwiKTtcblxuXHRcdFx0XHRcdFx0Ly8gV3JpdGUgYmFjay5cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVCYWNrTW9kaWZpZWRCdWxsZXRQb2ludChudWxsLCBmYWxzZSk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgdGhlIG5ldyBsYXN0IG9wZW5lZCBmaWxlIHBhdGggdG8gdGhlIGN1cnJlbnRseSBvcGVuZWQgZmlsZS5cblx0XHRcdGxhc3RPcGVuRmlsZVBhdGggPSBvcGVuZWRGaWxlPy5wYXRoO1xuXHRcdFx0bmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCA9IHRydWU7XG5cdFx0fSk7XG5cblx0XHQvLyBSZWdpc3RlciBhIERPTSBvbmNsaWNrIGV2ZW50IGZvciBpZiBpc29sYXRlIG9yIHdyaXRlIGJhY2sgYSBidWxsZXQgcG9pbnQuXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cblx0XHRcdC8vIEdldCBjdXJyZW50IGZpbGUgbGluZS5cblx0XHRcdGNvbnN0IGN1cnJlbnRFZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yO1xuXHRcdFx0Y29uc3QgZm9jdXNMaW5lID0gY3VycmVudEVkaXRvcj8uZWRpdG9yPy5nZXRDdXJzb3IoKS5saW5lO1xuXHRcdFx0Y29uc3QgZm9jdXNMaW5lQ29udGVudCA9IGN1cnJlbnRFZGl0b3I/LmVkaXRvcj8uZ2V0TGluZShmb2N1c0xpbmUpO1xuXG5cdFx0XHRpZiAoZXZ0LmFsdEtleSAmJiBldnQuY3RybEtleSAmJiB0aGlzLmNoZWNrSXNCdWxsZXRQb2ludChmb2N1c0xpbmVDb250ZW50KSkge1xuXG5cdFx0XHRcdC8vIEdldCBzb21lIGluZm9zIGFib3V0IHRoZSBmaWxlIGluIGZvY3VzLlxuXHRcdFx0XHRjb25zdCBmaWxlT3JpZ2luUGF0aCA9IGN1cnJlbnRFZGl0b3I/LmZpbGU/LnBhdGg7XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGZpbGUgaXMgZGVmaW5lZCBvciBub3QuXG5cdFx0XHRcdGlmICghZmlsZU9yaWdpblBhdGgpIHtcblxuXHRcdFx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJGaWxlIG9yaWdpbiBpcyBlaXRoZXIgbnVsbCBvciB1bmRlZmluZWQuXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIHRoZSBmaWxlIG9yaWdpbiBpcyBhbnkgZmlsZSBvciB0aGUgaXNvbGF0aW9uIGZpbGUuXG5cdFx0XHRcdFx0aWYgKGZpbGVPcmlnaW5QYXRoID09PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBXcml0ZSBiYWNrIGFjdGl2YXRlZCBtYW51YWxseS5cIik7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQmFja01vZGlmaWVkQnVsbGV0UG9pbnQoZXZ0LCB0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBJc29sYXRpb24gYWN0aXZhdGVkIG1hbnVhbGx5LlwiKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuaXNvbGF0ZUJ1bGxldFBvaW50KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0fVxuXHRcblxuXHRhc3luYyBvcGVuRmlsZVdpdGhvdXRFdmVudChmaWxlOiBURmlsZSB8IFRBYnN0cmFjdEZpbGUpIHtcblx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gZmFsc2U7XG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcblx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcblx0fVxuXG5cdC8vIC8vIEhlcmUgSSBuZWVkIHRvIGZpbmQgb3V0IHdoYXQgZWxlbWVudCB0eXBlIHdlIGFyZSBkZWFsaW5nIHdpdGggYW5kIHJldHVybiBpdCBvciBudWxsLlxuXHQvLyBjaGVja01kRWxlbWVudCh0ZXh0OiBzdHJpbmcpIHtcblxuXHQvLyB9XG5cblx0Y2hlY2tJc0J1bGxldFBvaW50KHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0ZXh0LnRyaW0oKS5zdGFydHNXaXRoKFwiLSBcIik7XG5cdH1cblxuXHRleHRyYWN0QnVsbGV0UG9pbnRzKGxpbmVzOiBzdHJpbmdbXSwgc3RhcnRMaW5lOiBudW1iZXIsIG5vcm1hbGl6ZWQ6IGJvb2xlYW4pIHtcblx0XHRcblx0XHQvLyBSZW1vdmUgdGhlIGZpcnN0IG51bWJlciBvZiBsaW5lcyBmcm9tIHRoZSBtYWluIGNvbnRlbnRcblx0XHRsaW5lcy5zcGxpY2UoMCwgc3RhcnRMaW5lKTtcdFx0XG5cblx0XHQvLyBHZXQgdGhlIGZpcnN0IGxpbmUgYW5kIGl0cyBvZmZzZXQgaW4gdGVybXMgb2YgdGFicy5cblx0XHRjb25zdCBmaXJzdExpbmUgPSBsaW5lcy5zaGlmdCgpO1xuXHRcdGNvbnN0IGZpcnN0T2Zmc2V0ID0gZmlyc3RMaW5lPy5tYXRjaCgvXlxcdCovKVswXS5sZW5ndGg7XG5cblx0XHQvLyBHbyB0aHJvdWdoIGFsbCBmb2xsb3dpbmcgbGluZXMgdW50aWwgb25lIGluIG5vdCBhIGJ1bGxldCBwb2ludCBvciBzdGFydHMgd2l0aCBlcXVhbCBvciBsZXNzIHRhYnMuXG5cdFx0bGV0IGJ1bGxldHMgPSBbZmlyc3RMaW5lXTtcblx0XHRmb3IgKGxldCBsaW5lTnIgaW4gbGluZXMpIHtcblx0XHRcdGNvbnN0IGxpbmVPZmZzZXQgPSBsaW5lc1tsaW5lTnJdLm1hdGNoKC9eXFx0Ki8pWzBdLmxlbmd0aDtcblx0XHRcdGNvbnN0IGlzQnVsbGV0UG9pbnQgPSBsaW5lc1tsaW5lTnJdLnRyaW0oKS5zdGFydHNXaXRoKFwiLSBcIik7XG5cdFx0XHRpZiAoIWlzQnVsbGV0UG9pbnQgfHwgbGluZU9mZnNldCA8PSBmaXJzdE9mZnNldCkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGJ1bGxldHMucHVzaChsaW5lc1tsaW5lTnJdKTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHtcblx0XHRcdFwiYnVsbGV0c1wiOiBub3JtYWxpemVkID8gYnVsbGV0cy5tYXAoYiA9PiBiLnN1YnN0cmluZyhmaXJzdE9mZnNldCkpIDogYnVsbGV0cyxcblx0XHRcdFwib2Zmc2V0XCI6IGZpcnN0T2Zmc2V0XG5cdFx0fTtcblx0fVxuXG5cdGFzeW5jIGlzb2xhdGVCdWxsZXRQb2ludCgpIHtcblxuXHRcdC8vIGNvbnN0IGN1cnJlbnRGb2N1c0xpbmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5lZGl0b3I/LmdldEN1cnNvcigpLmxpbmU7XG5cdFx0Y29uc3QgZm9jdXNGaWxlUGF0aCA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmZpbGU/LnBhdGg7XG5cdFx0XG5cdFx0Ly8gQSBzZWxlY3RlZCBsaW5lIGlzIHJlcXVpcmVkLlxuXHRcdGNvbnN0IGZvY3VzTGluZU5yID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yPy5nZXRDdXJzb3IoKS5saW5lO1xuXHRcdGlmIChmb2N1c0xpbmVOciA9PT0gdW5kZWZpbmVkIHx8IGZvY3VzTGluZU5yIDwgMCkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIk5vIGxpbmUgaW4gZm9jdXMuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHQvLyBDaGVjayBpZiBsaW5lIGlzIGEgc3VwcG9ydGVkIG1hcmtkb3duIGVsZW1lbnQuXG5cdFx0Y29uc3QgZm9jdXNMaW5lQ29udGVudCA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRvcj8uZ2V0TGluZShmb2N1c0xpbmVOcik7XG5cdFx0Y29uc3QgaXNCdWxsZXRQb2ludCA9IHRoaXMuY2hlY2tJc0J1bGxldFBvaW50KGZvY3VzTGluZUNvbnRlbnQpO1xuXHRcdGlmICghaXNCdWxsZXRQb2ludCkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIk5vdCBhIHN1cHBvcnRlZCBNYXJrRG93biBlbGVtZW50LlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHZXQgdGhlIGZvY3VzIGZpbGUuXG5cdFx0Y29uc3QgZm9jdXNGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGZpbGUgPT4gZmlsZS5wYXRoID09PSBmb2N1c0ZpbGVQYXRoKTtcblx0XHRpZiAoIWZvY3VzRmlsZSkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkZvY3VzIGZpbGUgZG9lc24ndCBleGlzdC5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGFsbCB0aGUgYnVsbGV0IGFuZCBzdWJidWxsZXQgcG9pbnRzLlxuXHRcdGNvbnN0IGZvY3VzRmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZvY3VzRmlsZSk7XG5cdFx0Y29uc3QgZm9jdXNGaWxlTGluZXMgPSBmb2N1c0ZpbGVDb250ZW50LnNwbGl0KFwiXFxuXCIpO1xuXHRcdGNvbnN0IGV4dHJhY3RlZEJ1bGxldFBvaW50cyA9IHRoaXMuZXh0cmFjdEJ1bGxldFBvaW50cyhmb2N1c0ZpbGVMaW5lcywgZm9jdXNMaW5lTnIsIHRydWUpO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSBmcm9udG1hdHRlci5cblx0XHRjb25zdCBmcm9udG1hdHRlckxpbmVzID0gW1xuXHRcdFx0XCItLS1cIixcblx0XHRcdGBvcmlnaW46ICR7dGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZmlsZT8ucGF0aH1gLFxuXHRcdFx0YHN0YXJ0TGluZTogJHtmb2N1c0xpbmVOcn1gLFxuXHRcdFx0YGVuZExpbmU6ICR7Zm9jdXNMaW5lTnIgKyBleHRyYWN0ZWRCdWxsZXRQb2ludHMuYnVsbGV0cy5sZW5ndGggLSAxfWAsXG5cdFx0XHRgb2Zmc2V0OiAke2V4dHJhY3RlZEJ1bGxldFBvaW50cy5vZmZzZXR9YCxcblx0XHRcdFwiLS0tXCJcblx0XHRdXG5cblx0XHQvLyBKb2luIHRoZSBsaW5lcyB0byB1c2UgdGhlbSBpbnNpZGUgdGhlIGNyZWF0ZSBmdW5jdGlvbiBsYXRlci5cblx0XHRjb25zdCBjb250ZW50VG9Jc29sYXRlID0gWy4uLmZyb250bWF0dGVyTGluZXMsIC4uLmV4dHJhY3RlZEJ1bGxldFBvaW50cy5idWxsZXRzXS5qb2luKFwiXFxuXCIpO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSB0ZW1wb3JhcnkgZmlsZSBpZiBpdCBkb2VzbnQgZXhpc3Qgb3RoZXJ3aXNlIGRlbGV0ZSBpdCBmaXJzdC5cblx0XHRjb25zdCBpc29sYXRlZEZpbGVBYnN0cmFjdCA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKTtcblx0XHRpZiAoaXNvbGF0ZWRGaWxlQWJzdHJhY3QpXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5kZWxldGUoaXNvbGF0ZWRGaWxlQWJzdHJhY3QpO1xuXG5cdFx0Ly8gV3JpdGUgdGhlIGJ1bGxldHMgdG8gdGhlIHRlbXBvcmFyeSBmaWxlLlxuXHRcdGNvbnN0IGlzb2xhdGVkRmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoLCBjb250ZW50VG9Jc29sYXRlKTtcblxuXHRcdC8vIENyZWF0ZSBuZXcgbGVhZiBhbmQgb3BlbiBhIGZpbGUgdGhlcmUuXG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShpc29sYXRlZEZpbGUpO1xuXG5cdH1cblxuXHRhc3luYyB3cml0ZUJhY2tNb2RpZmllZEJ1bGxldFBvaW50KGV2dDogTW91c2VFdmVudCB8IG51bGwsIG9wZW5PcmlnaW5GaWxlQWZ0ZXI6IGJvb2xlYW4pIHtcblxuXHRcdC8vIENoZWNrIHRoZSBldmVudCB0YXJnZXQgaWYgYW4gZXZlbnQgaXMgc3VwcGxpZWQuXG5cdFx0aWYgKGV2dCkge1xuXG5cdFx0XHQvLyBJZiBldmVudCB0aGVuIHRoZXJlIG11c3QgYmUgYSBsaW5lIGluIGZvY3VzLlxuXHRcdFx0Y29uc3QgY3VycmVudEVkaXRvciA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmVkaXRvcjtcblx0XHRcdGNvbnN0IGZvY3VzTGluZSA9IGN1cnJlbnRFZGl0b3I/LmdldEN1cnNvcigpLmxpbmU7XG5cdFx0XHRjb25zdCBmb2N1c0xpbmVDb250ZW50ID0gY3VycmVudEVkaXRvcj8uZ2V0TGluZShmb2N1c0xpbmUpO1xuXHRcdFx0XG5cdFx0XHQvLyBUbyB0cmlnZ2VyIGEgd3JpdGUgYmFjayB3aXRoIGEgbW91c2UgZXZlbnQgdGhlIHVzZXIgbXVzdCBjbGljayBvbiBhIGJ1bGxldCBwb2ludC5cblx0XHRcdGNvbnN0IGJ1bGxldFBvaW50TnIgPSB0aGlzLmNoZWNrSXNCdWxsZXRQb2ludChmb2N1c0xpbmVDb250ZW50KTtcblx0XHRcdGlmIChidWxsZXRQb2ludE5yID09PSBudWxsKSB7XG5cdFx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJMaW5lIGluIGZvY3VzIGRvZXNuJ3QgaGF2ZSBidWxsZXQgcG9pbnQuXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICh0aGlzLmV4dHJhY3RCdWxsZXRQb2ludHMoW2ZvY3VzTGluZUNvbnRlbnRdLCAwLCB0cnVlKS5vZmZzZXQgIT09IDApIHtcblx0XHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkxpbmUgaW4gZm9jdXMgaXNuJ3Qgcm9vdCBidWxsZXQgcG9pbnQuXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHR9XG5cblx0XHQvLyBDaGVjayBhbmQgZmluZCB0aGUgaXNvbGF0aW9uIGZpbGUgYW5kIGdldCBpdHMgY29udGVudC5cblx0XHRjb25zdCBpc29sYXRpb25GaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGZpbGUgPT4gZmlsZS5wYXRoID09PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKTtcblx0XHRpZiAoIWlzb2xhdGlvbkZpbGUpIHtcblx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJObyBpc29sYXRpb24gZmlsZS5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IGlzb2xhdGlvbkZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChpc29sYXRpb25GaWxlKTtcblxuXHRcdC8vIEV4dHJhY3QgdGhlIGZyb250bWF0dGVyIGZyb20gdGhlIGlzb2xhdGlvbiBmaWxlLlxuXHRcdGxldCBpc29sYXRpb25GaWxlRm07XG5cdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXJcblx0XHRcdC5wcm9jZXNzRnJvbnRNYXR0ZXIoaXNvbGF0aW9uRmlsZSwgKGZyb250bWF0dGVyKSA9PiBpc29sYXRpb25GaWxlRm0gPSBmcm9udG1hdHRlcilcblx0XHRcdC5jYXRjaChfID0+IHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJQcm9jZXNzaW5nIGZyb250bWF0dGVyLlwiKSk7XG5cdFx0aWYgKCFpc29sYXRpb25GaWxlRm0pIHtcblx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJDb3VsZG4ndCBwcm9jZXNzIGZyb250bWF0dGVyLlwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBFeHRyYWN0IHRoZSBjb250ZW50cyB0byB3cml0ZSBiYWNrIGZyb20gdGhlIGlzb2xhdGlvbiBmaWxlLlxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBpc29sYXRpb25GaWxlQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLVxcbi8pO1xuXHRcdGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIk5vIHRleHQgdG8gd3JpdGUgYmFjayBmcm9tIHRoZSBpc29sYXRpb24gZmlsZS5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IGlzb2xhdGlvbkZpbGVUZXh0ID0gaXNvbGF0aW9uRmlsZUNvbnRlbnQucmVwbGFjZShmcm9udG1hdHRlck1hdGNoWzBdLCBcIlwiKTtcblx0XHRjb25zdCBpc29sYXRpb25GaWxlTGluZXMgPSBpc29sYXRpb25GaWxlVGV4dC5zcGxpdChcIlxcblwiKTtcblxuXHRcdC8vIEFwcGx5IHRoZSBvZmZzZXQuXG5cdFx0Y29uc3Qgb2Zmc2V0SXNvbGF0aW9uRmlsZUxpbmVzID0gaXNvbGF0aW9uRmlsZUxpbmVzLm1hcChsaW5lID0+IFwiXFx0XCIucmVwZWF0KGlzb2xhdGlvbkZpbGVGbS5vZmZzZXQpICsgbGluZSk7XG5cblx0XHQvLyBDaGVjayBhbmQgZ2V0IHRoZSBvcmlnaW4gZmlsZS5cblx0XHRjb25zdCBvcmlnaW5GaWxlUGF0aCA9IGlzb2xhdGlvbkZpbGVGbS5vcmlnaW47XG5cdFx0Y29uc3Qgb3JpZ2luRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmluZChmaWxlID0+IGZpbGUucGF0aCA9PT0gb3JpZ2luRmlsZVBhdGgpO1xuXHRcdGlmICghb3JpZ2luRmlsZSkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIk9yaWdpbiBmaWxlIGRvZXNuJ3QgZXhpc3QuXCIpO1xuXHRcdFx0Ly8gcmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHQvLyBXcml0ZSBiYWNrIHRoZSBpc29sYXRlZCBjb250ZW50IGludG8gdGhlIG9yaWdpbiBmaWxlLlxuXHRcdGNvbnN0IG9yaWdpbkZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChvcmlnaW5GaWxlKTtcblx0XHRjb25zdCBvcmlnaW5GaWxlTGluZXMgPSBvcmlnaW5GaWxlQ29udGVudC5zcGxpdChcIlxcblwiKTtcblx0XHRjb25zdCBvcmlnaW5MaW5lc1RvUmVtb3ZlUmFuZ2UgPSBpc29sYXRpb25GaWxlRm0uZW5kTGluZSArIDEgLSBpc29sYXRpb25GaWxlRm0uc3RhcnRMaW5lO1xuXHRcdG9yaWdpbkZpbGVMaW5lcy5zcGxpY2UoaXNvbGF0aW9uRmlsZUZtLnN0YXJ0TGluZSwgb3JpZ2luTGluZXNUb1JlbW92ZVJhbmdlLCAuLi5vZmZzZXRJc29sYXRpb25GaWxlTGluZXMpO1xuXHRcdGNvbnN0IG1vZGlmaWVkT3JpZ2luQ29udGVudCA9IG9yaWdpbkZpbGVMaW5lcy5qb2luKFwiXFxuXCIpO1xuXG5cdFx0Ly8gQXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIG9yaWdpbiBmaWxlLlxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShvcmlnaW5GaWxlLCBtb2RpZmllZE9yaWdpbkNvbnRlbnQpO1xuXG5cdFx0Ly8gT3BlbiB0aGUgb3JpZ2luIGZpbGUgb3IgdGhlIGdpdmVuIGZpbGUgdG8gb3BlbiBhZnRlci5cblx0XHRpZiAob3Blbk9yaWdpbkZpbGVBZnRlcikge1xuXHRcdFx0bmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCA9IGZhbHNlO1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShvcmlnaW5GaWxlKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gRGVsZXRlIHRoZSBpc29sYXRpb24gZmlsZS5cblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUodGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgpKTtcblxuXHR9XG5cblx0c2hvd0ZhaWxOb3RpY2UobXNnOiBzdHJpbmcpIHtcblx0XHRuZXcgTm90aWNlKFwiQnVsbGV0UG9pbnRJc29sYXRpb24gZmFpbGVkOiBcIiArIG1zZyk7XG5cdH1cblxuXHRjb252ZXJ0SnNvblRvRnJvbnRtYXR0ZXIob2JqLCBwZW5kaW5nTmV3bGluZTogYm9vbGVhbiA9IHRydWUpIHtcblx0XHRsZXQgZnJvbnRtYXR0ZXJBcnIgPSBPYmplY3Qua2V5cyhvYmopLm1hcCgoa2V5KSA9PiBgJHtrZXl9OiAke29ialtrZXldfWApO1xuXHRcdGZyb250bWF0dGVyQXJyLnB1c2goXCItLS1cIik7XG5cdFx0ZnJvbnRtYXR0ZXJBcnIudW5zaGlmdChcIi0tLVwiKTtcblx0XHRsZXQgZnJvbnRtYXR0ZXJUZXh0ID0gZnJvbnRtYXR0ZXJBcnIuam9pbihcIlxcblwiKVxuXHRcdHJldHVybiBwZW5kaW5nTmV3bGluZVxuXHRcdFx0PyBmcm9udG1hdHRlclRleHQgKyBcIlxcblwiXG5cdFx0XHQ6IGZyb250bWF0dGVyVGV4dDtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBCdWxsZXRQb2ludElzb2xhdG9yTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuc2V0VGV4dCgnV29haCEnKTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmNsYXNzIEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cblx0cGx1Z2luOiBCdWxsZXRQb2ludElzb2xhdG9yO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEJ1bGxldFBvaW50SXNvbGF0b3IpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHR1cGRhdGVJc29sYXRpb25GaWxlUGF0aCgpOiB2b2lkIHtcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCA9IFxuXHRcdFx0KHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVGb2xkZXIgPT09IFwiL1wiKVxuXHRcdFx0XHQ/IHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVOYW1lXG5cdFx0XHRcdDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZUZvbGRlciArIHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVOYW1lO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwge3RleHQ6IFwiQnVsbGV0IFBvaW50IElzb2xhdG9yIFBsdWdpbiAtIFNldHRpbmdzXCJ9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJJc29sYXRpb24gZmlsZSBuYW1lXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRoZSBuYW1lIG9mIHRoZSBpc29sYXRpb24gZmlsZS5cIilcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJUaGUgbmFtZSBvZiB0aGUgaXNvbGF0aW9uIGZpbGUuXCIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc29sYXRpb25GaWxlTmFtZSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVOYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVJc29sYXRpb25GaWxlUGF0aCgpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIklzb2xhdGlvbiBmaWxlIGZvbGRlciBwYXRoXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRoZSBwYXRoIHdoZXJlIHRoZSBpc29sYXRpb24gZmlsZSBzaG91bGQgYmUgY3JlYXRlZC5cIilcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG5cdFx0XHRcdGNvbnN0IGZvbGRlcnMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLm1hcChmaWxlID0+IGZpbGUucGFyZW50Py5wYXRoKS51bmlxdWUoKTtcblx0XHRcdFx0Zm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiBkcm9wZG93bi5hZGRPcHRpb24oZm9sZGVyLCBmb2xkZXIpKTtcblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZUZvbGRlcilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc29sYXRpb25GaWxlRm9sZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZUlzb2xhdGlvbkZpbGVQYXRoKCk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0fSk7XG5cblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFvTDtBQVlwTCxJQUFNLG1CQUFnRDtBQUFBLEVBQ3JELG1CQUFtQjtBQUFBLEVBQ25CLHFCQUFxQjtBQUFBLEVBQ3JCLG1CQUFtQjtBQUNwQjtBQUdBLElBQUksNEJBQTRCO0FBQ2hDLElBQUk7QUFFSixJQUFxQixzQkFBckIsY0FBaUQsdUJBQU87QUFBQSxFQUl2RCxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUd4QixVQUFNLGVBQWUsS0FBSyxjQUFjLFFBQVEsOEJBQThCLENBQUMsUUFBb0I7QUFFbEcsVUFBSSx1QkFBTyx3QkFBd0I7QUFBQSxJQUNwQyxDQUFDO0FBRUQsaUJBQWEsU0FBUyx3QkFBd0I7QUFHOUMsVUFBTSxrQkFBa0IsS0FBSyxpQkFBaUI7QUFDOUMsb0JBQWdCLFFBQVEsaUJBQWlCO0FBR3pDLFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLE9BQU8sUUFBZ0IsUUFBeUM7QUFFL0UsWUFBSSx1QkFBTyx5REFBeUQ7QUFHcEUsY0FBTSxLQUFLLG1CQUFtQjtBQUFBLE1BQy9CO0FBQUEsSUFDRCxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsT0FBTyxRQUFnQixRQUF5QztBQTFEbkY7QUE2REksWUFBSSwyQkFBMkI7QUFHOUIsZ0JBQUksU0FBSSxTQUFKLG1CQUFVLFVBQVMsS0FBSyxTQUFTLG1CQUFtQjtBQUV2RCxnQkFBSSx1QkFBTywwREFBMEQ7QUFHckUsa0JBQU0sS0FBSyw2QkFBNkIsTUFBTSxJQUFJO0FBQUEsVUFDbkQ7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUFBLElBQ0QsQ0FBQztB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
