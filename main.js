/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BulletPointIsolator
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  isolationFilePath: "isolation.md"
};
var needsWriteBackUnloadEvent = true;
var lastOpenFilePath;
var BulletPointIsolator = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    console.log("Settings", this.settings);
    const ribbonIconEl = this.addRibbonIcon("dice", "BulletPointIsolator Plugin", (evt) => {
      new import_obsidian.Notice("This is a notice i guess!");
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "bullet-point-isolator-write-back",
      name: "Write Back",
      editorCallback: async (editor, ctx) => {
        var _a;
        if (needsWriteBackUnloadEvent) {
          if (((_a = ctx.file) == null ? void 0 : _a.path) === this.settings.isolationFilePath) {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated per command.");
            await this.writeBackModifiedBulletPoint(null, true);
          }
        }
      }
    });
    this.addSettingTab(new BulletPointIsolatorSettingTab(this.app, this));
    this.app.workspace.on("file-open", async (openedFile) => {
      if (!lastOpenFilePath)
        lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      if (needsWriteBackUnloadEvent) {
        if (lastOpenFilePath === this.settings.isolationFilePath && (openedFile == null ? void 0 : openedFile.path) !== this.settings.isolationFilePath) {
          const isolationFile = this.app.vault.getFiles().find((file) => file.path === this.settings.isolationFilePath);
          if (isolationFile) {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated automatically.");
            await this.writeBackModifiedBulletPoint(null, false);
          }
        }
      }
      lastOpenFilePath = openedFile == null ? void 0 : openedFile.path;
      needsWriteBackUnloadEvent = true;
    });
    this.registerDomEvent(document, "click", async (evt) => {
      var _a, _b;
      if (evt.altKey && evt.ctrlKey && this.getBulletPointNr(evt.target.parentNode)) {
        const fileOriginPath = (_b = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
        if (!fileOriginPath) {
          this.showFailNotice("File origin is either null or undefined.");
        } else {
          if (fileOriginPath === this.settings.isolationFilePath) {
            new import_obsidian.Notice("Bullet Point Isolator: Write back activated manually.");
            console.log("Bullet Point Isolator: Write back activated manually.");
            await this.writeBackModifiedBulletPoint(evt, true);
          } else {
            new import_obsidian.Notice("Bullet Point Isolator: Isolation activated manually.");
            console.log("Bullet Point Isolator: Isolation activated manually.");
            await this.isolateBulletPoint(evt);
          }
        }
      }
    });
  }
  async openFileWithoutEvent(file) {
    needsWriteBackUnloadEvent = false;
    await this.app.workspace.getLeaf().openFile(file);
    needsWriteBackUnloadEvent = true;
  }
  async isolateBulletPoint(evt) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const currentFocusLine = (_b = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.editor) == null ? void 0 : _b.getCursor().line;
    if (currentFocusLine === void 0 || currentFocusLine === null) {
      this.showFailNotice("No line in focus.");
      return;
    }
    const isBulletPoint = this.getBulletPointNr(evt.target.parentNode);
    if (isBulletPoint === null) {
      this.showFailNotice("Line in focus doesn't have bullet point.");
      return;
    }
    const bulletPointsCount = this.countBulletPointLines(evt.target.parentNode);
    let rootLine = (_d = (_c = this.app.workspace.activeEditor) == null ? void 0 : _c.editor) == null ? void 0 : _d.getLine(currentFocusLine);
    const rootOffset = rootLine == null ? void 0 : rootLine.match(/^\s*/)[0].length;
    if (rootOffset >= 1)
      rootLine = rootLine.substring(rootOffset);
    let linesToIsolate = [rootLine];
    for (let i = 1; i < bulletPointsCount; i++) {
      let lineToIsolate = (_f = (_e = this.app.workspace.activeEditor) == null ? void 0 : _e.editor) == null ? void 0 : _f.getLine(currentFocusLine + i);
      if (rootOffset >= 1) {
        lineToIsolate = lineToIsolate == null ? void 0 : lineToIsolate.substring(rootOffset);
      }
      linesToIsolate.push(lineToIsolate);
    }
    let bulletPointsText = linesToIsolate.join("\n");
    const frontmatterJson = {
      "origin": (_h = (_g = this.app.workspace.activeEditor) == null ? void 0 : _g.file) == null ? void 0 : _h.path,
      "startLine": currentFocusLine,
      "endLine": currentFocusLine + bulletPointsCount - 1,
      "offset": rootOffset
    };
    const frontmatter = this.convertJsonToFrontmatter(frontmatterJson);
    bulletPointsText = frontmatter + bulletPointsText;
    const isolatedFileAbstract = this.app.vault.getAbstractFileByPath(this.settings.isolationFilePath);
    if (isolatedFileAbstract)
      this.app.vault.delete(isolatedFileAbstract);
    const isolatedFile = await this.app.vault.create(this.settings.isolationFilePath, bulletPointsText);
    await this.app.workspace.getLeaf().openFile(isolatedFile);
  }
  async writeBackModifiedBulletPoint(evt, openOriginFileAfter) {
    if (evt) {
      const bulletPointNr = this.getBulletPointNr(evt.target.parentNode);
      if (bulletPointNr === null) {
        this.showFailNotice("Line in focus doesn't have bullet point.");
        return;
      } else if (bulletPointNr !== 1) {
        this.showFailNotice("Line in focus isn't root bullet point.");
        return;
      }
    }
    const isolationFile = this.app.vault.getFiles().find((file) => file.path === this.settings.isolationFilePath);
    if (!isolationFile) {
      this.showFailNotice("No isolation file.");
      return;
    }
    const isolationFileContent = await this.app.vault.read(isolationFile);
    let isolationFileFm;
    await this.app.fileManager.processFrontMatter(isolationFile, (frontmatter) => isolationFileFm = frontmatter).catch((_) => this.showFailNotice("Processing frontmatter."));
    if (!isolationFileFm) {
      this.showFailNotice("Couldn't process frontmatter.");
      return;
    }
    const frontmatterMatch = isolationFileContent.match(/^---\n([\s\S]*?)\n---\n/);
    if (!frontmatterMatch) {
      this.showFailNotice("No text to write back from the isolation file.");
      return;
    }
    const isolationFileText = isolationFileContent.replace(frontmatterMatch[0], "");
    const isolationFileLines = isolationFileText.split("\n");
    const offsetIsolationFileLines = isolationFileLines.map((line) => "	".repeat(isolationFileFm.offset) + line);
    const originFilePath = isolationFileFm.origin;
    const originFile = this.app.vault.getFiles().find((file) => file.path === originFilePath);
    if (!originFile) {
      this.showFailNotice("Origin file doesn't exist.");
    }
    const originFileContent = await this.app.vault.read(originFile);
    const originFileLines = originFileContent.split("\n");
    const originLinesToRemoveRange = isolationFileFm.endLine + 1 - isolationFileFm.startLine;
    originFileLines.splice(isolationFileFm.startLine, originLinesToRemoveRange, ...offsetIsolationFileLines);
    const modifiedOriginContent = originFileLines.join("\n");
    await this.app.vault.modify(originFile, modifiedOriginContent);
    if (openOriginFileAfter) {
      needsWriteBackUnloadEvent = false;
      await this.app.workspace.getLeaf().openFile(originFile);
    }
    await this.app.vault.delete(this.app.vault.getAbstractFileByPath(this.settings.isolationFilePath));
  }
  showFailNotice(msg) {
    new import_obsidian.Notice("BulletPointIsolation failed: " + msg);
  }
  getBulletPointNr(elem) {
    const match = elem.className.match(/HyperMD-list-line-(\d+)/);
    return match ? parseInt(match[1]) : null;
  }
  countBulletPointLines(elem) {
    let sibling = elem;
    const rootOffset = this.getBulletPointNr(sibling);
    let siblingCount = 1;
    while (sibling.nextSibling !== null) {
      sibling = sibling.nextSibling;
      const siblingOffset = this.getBulletPointNr(sibling);
      if (rootOffset >= siblingOffset)
        break;
      siblingCount++;
    }
    return siblingCount;
  }
  convertJsonToFrontmatter(obj, pendingNewline = true) {
    let frontmatterArr = Object.keys(obj).map((key) => `${key}: ${obj[key]}`);
    frontmatterArr.push("---");
    frontmatterArr.unshift("---");
    let frontmatterText = frontmatterArr.join("\n");
    return pendingNewline ? frontmatterText + "\n" : frontmatterText;
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var BulletPointIsolatorSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Bullet Point Isolator Plugin - Settings" });
    new import_obsidian.Setting(containerEl).setName("Isolation file path").setDesc("The path where the isolation file should be created.").addText((text) => text.setPlaceholder("The path here...").setValue(this.plugin.settings.isolationFilePath).onChange(async (value) => {
      this.plugin.settings.isolationFilePath = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBFZGl0b3JQb3NpdGlvbiwgVGV4dEZpbGVWaWV3LCBEYXRhV3JpdGVPcHRpb25zLCBURmlsZSwgVEFic3RyYWN0RmlsZSwgTWFya2Rvd25GaWxlSW5mbyB9IGZyb20gJ29ic2lkaWFuJztcblxuXG4vLyBSZW1lbWJlciB0byByZW5hbWUgdGhlc2UgY2xhc3NlcyBhbmQgaW50ZXJmYWNlcyFcblxuaW50ZXJmYWNlIEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5ncyB7XG5cdGlzb2xhdGlvbkZpbGVQYXRoOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEJ1bGxldFBvaW50SXNvbGF0b3JTZXR0aW5ncyA9IHtcblx0aXNvbGF0aW9uRmlsZVBhdGg6IFwiaXNvbGF0aW9uLm1kXCJcbn1cblxubGV0IG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQgPSB0cnVlO1xubGV0IGxhc3RPcGVuRmlsZVBhdGg7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1bGxldFBvaW50SXNvbGF0b3IgZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogQnVsbGV0UG9pbnRJc29sYXRvclNldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdGNvbnNvbGUubG9nKFwiU2V0dGluZ3NcIiwgdGhpcy5zZXR0aW5ncyk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdkaWNlJywgJ0J1bGxldFBvaW50SXNvbGF0b3IgUGx1Z2luJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Ly8gQ2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBpY29uLlxuXHRcdFx0bmV3IE5vdGljZSgnVGhpcyBpcyBhIG5vdGljZSBpIGd1ZXNzIScpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxuXHRcdGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdTdGF0dXMgQmFyIFRleHQnKTtcblxuXHRcdC8vIC8vIFRyaWdnZXJzIGlzb2xhdGlvbi5cblx0XHQvLyB0aGlzLmFkZENvbW1hbmQoe1xuXHRcdC8vIFx0aWQ6IFwiYnVsbGV0LXBvaW50LWlzb2xhdG9yLWlzb2xhdGVcIixcblx0XHQvLyBcdG5hbWU6IFwiSXNvbGF0ZVwiLFxuXHRcdC8vIFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHQvLyBcdFx0Ly8gbmV3IEJ1bGxldFBvaW50SXNvbGF0b3JNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcIlRyaWdnZXJlZCBpc29sYXRpb24uXCIpO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH0pO1xuXHRcdC8vIFRyaWdnZXJzIHdyaXRpbmcgYmFjay5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiYnVsbGV0LXBvaW50LWlzb2xhdG9yLXdyaXRlLWJhY2tcIixcblx0XHRcdG5hbWU6IFwiV3JpdGUgQmFja1wiLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgY3R4OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGlzIGN1cnJlbnRseSBibG9ja2VkLlxuXHRcdFx0XHRpZiAobmVlZHNXcml0ZUJhY2tVbmxvYWRFdmVudCkge1xuXG5cdFx0XHRcdFx0Ly8gQ2hlY2tzIHRoYXQgd2UganVzdCBzd2l0Y2hlZCBmcm9tIHRoZSBpc29sYXRpb24gZmlsZSB0byBhbm90aGVyIGZpbGUuXG5cdFx0XHRcdFx0aWYgKGN0eC5maWxlPy5wYXRoID09PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKSB7XG5cblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3I6IElzb2xhdGlvbiBhY3RpdmF0ZWQgcGVyIGNvbW1hbmQuXCIpO1xuXG5cdFx0XHRcdFx0XHQvLyBXcml0ZSBiYWNrLlxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUJhY2tNb2RpZmllZEJ1bGxldFBvaW50KG51bGwsIHRydWUpO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8gLy8gVGhpcyBhZGRzIGEgY29tcGxleCBjb21tYW5kIHRoYXQgY2FuIGNoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGFwcCBhbGxvd3MgZXhlY3V0aW9uIG9mIHRoZSBjb21tYW5kXG5cdFx0Ly8gdGhpcy5hZGRDb21tYW5kKHtcblx0XHQvLyBcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtY29tcGxleCcsXG5cdFx0Ly8gXHRuYW1lOiAnT3BlbiBzYW1wbGUgbW9kYWwgKGNvbXBsZXgpJyxcblx0XHQvLyBcdGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuXHRcdC8vIFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXG5cdFx0Ly8gXHRcdGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Ly8gXHRcdGlmIChtYXJrZG93blZpZXcpIHtcblx0XHQvLyBcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXG5cdFx0Ly8gXHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgZmFsc2UsIHRoZW4gd2Ugd2FudCB0byBhY3R1YWxseSBwZXJmb3JtIHRoZSBvcGVyYXRpb24uXG5cdFx0Ly8gXHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdC8vIFx0XHRcdFx0bmV3IEJ1bGxldFBvaW50SXNvbGF0b3JNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdC8vIFx0XHRcdH1cblxuXHRcdC8vIFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0Ly8gXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0Ly8gXHRcdH1cblx0XHQvLyBcdH1cblx0XHQvLyB9KTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0Ly8gU2V0IHRoZSBvbiBmaWxlLW9wZW4gZXZlbnQgdGhhdCBjaGVja3MgaWYgd2Ugd2FudCB0byB3cml0ZSBiYWNrIHRoZSBidWxsZXQgcG9pbnQuXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIGFzeW5jIChvcGVuZWRGaWxlKSA9PiB7XG5cblx0XHRcdC8vIFNldCB0aGUgbGFzdCBvcGVuZWQgZmlsZSB0byB0aGUgY3VycmVudCBmaWxlLlxuXHRcdFx0aWYgKCFsYXN0T3BlbkZpbGVQYXRoKVxuXHRcdFx0XHRsYXN0T3BlbkZpbGVQYXRoID0gb3BlbmVkRmlsZT8ucGF0aDtcblx0XHRcdFxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBwYXJ0IG9mIHRoZSBldmVudCBpcyBjdXJyZW50bHkgYmxvY2tlZC5cblx0XHRcdGlmIChuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50KSB7XG5cblx0XHRcdFx0Ly8gQ2hlY2tzIHRoYXQgd2UganVzdCBzd2l0Y2hlZCBmcm9tIHRoZSBpc29sYXRpb24gZmlsZSB0byBhbm90aGVyIGZpbGUuXG5cdFx0XHRcdGlmIChsYXN0T3BlbkZpbGVQYXRoID09PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoICYmIG9wZW5lZEZpbGU/LnBhdGggIT09IHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgpIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrIHRoYXQgdGhlIGlzb2xhdGlvbiBmaWxlIGV4aXN0cy5cblx0XHRcdFx0XHRjb25zdCBpc29sYXRpb25GaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maW5kKGZpbGUgPT4gZmlsZS5wYXRoID09PSB0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKTtcblx0XHRcdFx0XHRpZiAoaXNvbGF0aW9uRmlsZSkge1xuXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBJc29sYXRpb24gYWN0aXZhdGVkIGF1dG9tYXRpY2FsbHkuXCIpO1xuXG5cdFx0XHRcdFx0XHQvLyBXcml0ZSBiYWNrLlxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUJhY2tNb2RpZmllZEJ1bGxldFBvaW50KG51bGwsIGZhbHNlKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgbmV3IGxhc3Qgb3BlbmVkIGZpbGUgcGF0aCB0byB0aGUgY3VycmVudGx5IG9wZW5lZCBmaWxlLlxuXHRcdFx0bGFzdE9wZW5GaWxlUGF0aCA9IG9wZW5lZEZpbGU/LnBhdGg7XG5cdFx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIGEgRE9NIG9uY2xpY2sgZXZlbnQgZm9yIGlmIGlzb2xhdGUgb3Igd3JpdGUgYmFjayBhIGJ1bGxldCBwb2ludC5cblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIGFzeW5jIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGlmIChldnQuYWx0S2V5ICYmIGV2dC5jdHJsS2V5ICYmIHRoaXMuZ2V0QnVsbGV0UG9pbnROcihldnQudGFyZ2V0LnBhcmVudE5vZGUpKSB7XG5cblx0XHRcdFx0Ly8gR2V0IHNvbWUgaW5mb3MgYWJvdXQgdGhlIGZpbGUgaW4gZm9jdXMuXG5cdFx0XHRcdGNvbnN0IGZpbGVPcmlnaW5QYXRoID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZmlsZT8ucGF0aDtcblxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSBpcyBkZWZpbmVkIG9yIG5vdC5cblx0XHRcdFx0aWYgKCFmaWxlT3JpZ2luUGF0aCkge1xuXG5cdFx0XHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkZpbGUgb3JpZ2luIGlzIGVpdGhlciBudWxsIG9yIHVuZGVmaW5lZC5cIik7XG5cdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGZpbGUgb3JpZ2luIGlzIGFueSBmaWxlIG9yIHRoZSBpc29sYXRpb24gZmlsZS5cblx0XHRcdFx0XHRpZiAoZmlsZU9yaWdpblBhdGggPT09IHRoaXMuc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGgpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3I6IFdyaXRlIGJhY2sgYWN0aXZhdGVkIG1hbnVhbGx5LlwiKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBXcml0ZSBiYWNrIGFjdGl2YXRlZCBtYW51YWxseS5cIik7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQmFja01vZGlmaWVkQnVsbGV0UG9pbnQoZXZ0LCB0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBJc29sYXRpb24gYWN0aXZhdGVkIG1hbnVhbGx5LlwiKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQnVsbGV0IFBvaW50IElzb2xhdG9yOiBJc29sYXRpb24gYWN0aXZhdGVkIG1hbnVhbGx5LlwiKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuaXNvbGF0ZUJ1bGxldFBvaW50KGV2dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdC8vIHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblx0fVxuXHRcblxuXHRhc3luYyBvcGVuRmlsZVdpdGhvdXRFdmVudChmaWxlOiBURmlsZSB8IFRBYnN0cmFjdEZpbGUpIHtcblx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gZmFsc2U7XG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcblx0XHRuZWVkc1dyaXRlQmFja1VubG9hZEV2ZW50ID0gdHJ1ZTtcblx0fVxuXG5cdGFzeW5jIGlzb2xhdGVCdWxsZXRQb2ludChldnQ6IE1vdXNlRXZlbnQpIHtcblxuXHRcdGNvbnN0IGN1cnJlbnRGb2N1c0xpbmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5lZGl0b3I/LmdldEN1cnNvcigpLmxpbmU7XG5cblx0XHQvLyBBIHNlbGVjdGVkIGxpbmUgaXMgcmVxdWlyZWQuXG5cdFx0aWYgKGN1cnJlbnRGb2N1c0xpbmUgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50Rm9jdXNMaW5lID09PSBudWxsKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiTm8gbGluZSBpbiBmb2N1cy5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHNlbGVjdGVkIGZpbGUgbXVzdCBjb250YWluIGEgYnVsbGV0IHBvaW50LlxuXHRcdGNvbnN0IGlzQnVsbGV0UG9pbnQgPSB0aGlzLmdldEJ1bGxldFBvaW50TnIoZXZ0LnRhcmdldC5wYXJlbnROb2RlKTtcblx0XHRpZiAoaXNCdWxsZXRQb2ludCA9PT0gbnVsbCkge1xuXHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkxpbmUgaW4gZm9jdXMgZG9lc24ndCBoYXZlIGJ1bGxldCBwb2ludC5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8vIEdldCBhbGwgdGhlIGJ1bGxldCBhbmQgc3ViYnVsbGV0IHBvaW50cy5cblx0XHRjb25zdCBidWxsZXRQb2ludHNDb3VudCA9IHRoaXMuY291bnRCdWxsZXRQb2ludExpbmVzKGV2dC50YXJnZXQucGFyZW50Tm9kZSk7XG5cblx0XHQvLyBHZXQgY3VycmVudCBhY3RpdmUgbGluZS5cblx0XHRsZXQgcm9vdExpbmUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5lZGl0b3I/LmdldExpbmUoY3VycmVudEZvY3VzTGluZSk7XG5cblx0XHQvLyBHZXQgdGhlIHJvb3Qgb2Zmc2V0IGFuZCBub3JtYWxpemUgdGhlIGZpcnN0IGxpbmUuXG5cdFx0Y29uc3Qgcm9vdE9mZnNldCA9IHJvb3RMaW5lPy5tYXRjaCgvXlxccyovKVswXS5sZW5ndGg7XG5cdFx0aWYgKHJvb3RPZmZzZXQgPj0gMSlcblx0XHRcdHJvb3RMaW5lID0gcm9vdExpbmUuc3Vic3RyaW5nKHJvb3RPZmZzZXQpO1xuXG5cdFx0Ly8gSXRlcmF0ZSB0aHJvdWdoIHRoZSBsaW5lcyBhZmZlY3RlZCBieSB0aGUgY2xpY2suXG5cdFx0bGV0IGxpbmVzVG9Jc29sYXRlID0gW3Jvb3RMaW5lXTtcblx0XHRmb3IgKGxldCBpID0gMTsgaSA8IGJ1bGxldFBvaW50c0NvdW50OyBpKyspIHtcblxuXHRcdFx0Ly8gR2V0IHRoZSBsaW5lLlxuXHRcdFx0bGV0IGxpbmVUb0lzb2xhdGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5lZGl0b3I/LmdldExpbmUoY3VycmVudEZvY3VzTGluZSArIGkpO1xuXG5cdFx0XHQvLyBOb3JtYWxpemUgdGhlIGxlYWRpbmcgc3BhY2VzIGFuZCBpZiBpdCBpcyBhIHNwYWNlIHRoZW4gcmVwbGFjZSBpdCB3aXRoIHRhYnMuXG5cdFx0XHRpZiAocm9vdE9mZnNldCA+PSAxKSB7XG5cdFx0XHRcdGxpbmVUb0lzb2xhdGUgPSBsaW5lVG9Jc29sYXRlPy5zdWJzdHJpbmcocm9vdE9mZnNldCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFB1c2ggdGhlIGxpbmUgdG8gdGhlIGFycmF5LlxuXHRcdFx0bGluZXNUb0lzb2xhdGUucHVzaChsaW5lVG9Jc29sYXRlKTtcblx0XHR9XG5cblx0XHQvLyBKb2luIHRoZSBsaW5lcyB0byB1c2UgdGhlbSBpbnNpZGUgdGhlIGNyZWF0ZSBmdW5jdGlvbiBsYXRlci5cblx0XHRsZXQgYnVsbGV0UG9pbnRzVGV4dCA9IGxpbmVzVG9Jc29sYXRlLmpvaW4oXCJcXG5cIik7XG5cblx0XHQvLyBBZGQgc29tZSBmcm9udG1hdHRlciB0byB0aGUgYnVsbGV0cG9pbnQgdG8gY29weS5cblx0XHRjb25zdCBmcm9udG1hdHRlckpzb24gPSB7XG5cdFx0XHRcIm9yaWdpblwiOiB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yPy5maWxlPy5wYXRoLFxuXHRcdFx0XCJzdGFydExpbmVcIjogY3VycmVudEZvY3VzTGluZSxcblx0XHRcdFwiZW5kTGluZVwiOiBjdXJyZW50Rm9jdXNMaW5lICsgYnVsbGV0UG9pbnRzQ291bnQgLSAxLFxuXHRcdFx0XCJvZmZzZXRcIjogcm9vdE9mZnNldFxuXHRcdH1cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuY29udmVydEpzb25Ub0Zyb250bWF0dGVyKGZyb250bWF0dGVySnNvbik7XG5cdFx0YnVsbGV0UG9pbnRzVGV4dCA9IGZyb250bWF0dGVyICsgYnVsbGV0UG9pbnRzVGV4dDtcblxuXHRcdC8vIENyZWF0ZSB0aGUgdGVtcG9yYXJ5IGZpbGUgaWYgaXQgZG9lc250IGV4aXN0IG90aGVyd2lzZSBkZWxldGUgaXQgZmlyc3QuXG5cdFx0Y29uc3QgaXNvbGF0ZWRGaWxlQWJzdHJhY3QgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCk7XG5cdFx0aWYgKGlzb2xhdGVkRmlsZUFic3RyYWN0KVxuXHRcdFx0dGhpcy5hcHAudmF1bHQuZGVsZXRlKGlzb2xhdGVkRmlsZUFic3RyYWN0KTtcblxuXHRcdC8vIFdyaXRlIHRoZSBidWxsZXRzIHRvIHRoZSB0ZW1wb3JhcnkgZmlsZS5cblx0XHRjb25zdCBpc29sYXRlZEZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCwgYnVsbGV0UG9pbnRzVGV4dCk7XG5cblx0XHQvLyBDcmVhdGUgbmV3IGxlYWYgYW5kIG9wZW4gYSBmaWxlIHRoZXJlLlxuXHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoaXNvbGF0ZWRGaWxlKTtcblxuXHR9XG5cblx0YXN5bmMgd3JpdGVCYWNrTW9kaWZpZWRCdWxsZXRQb2ludChldnQ6IE1vdXNlRXZlbnQgfCBudWxsLCBvcGVuT3JpZ2luRmlsZUFmdGVyOiBib29sZWFuKSB7XG5cblx0XHQvLyBDaGVjayB0aGUgZXZlbnQgdGFyZ2V0IGlmIGFuIGV2ZW50IGlzIHN1cHBsaWVkLlxuXHRcdGlmIChldnQpIHtcblx0XHRcdFxuXHRcdFx0Ly8gVGhlIHNlbGVjdGVkIGZpbGUgbXVzdCBjb250YWluIGEgYnVsbGV0IHBvaW50LlxuXHRcdFx0Y29uc3QgYnVsbGV0UG9pbnROciA9IHRoaXMuZ2V0QnVsbGV0UG9pbnROcihldnQudGFyZ2V0LnBhcmVudE5vZGUpO1xuXHRcdFx0aWYgKGJ1bGxldFBvaW50TnIgPT09IG51bGwpIHtcblx0XHRcdFx0dGhpcy5zaG93RmFpbE5vdGljZShcIkxpbmUgaW4gZm9jdXMgZG9lc24ndCBoYXZlIGJ1bGxldCBwb2ludC5cIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKCBidWxsZXRQb2ludE5yICE9PSAxKSB7XG5cdFx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJMaW5lIGluIGZvY3VzIGlzbid0IHJvb3QgYnVsbGV0IHBvaW50LlwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgYW5kIGZpbmQgdGhlIGlzb2xhdGlvbiBmaWxlIGFuZCBnZXQgaXRzIGNvbnRlbnQuXG5cdFx0Y29uc3QgaXNvbGF0aW9uRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmluZChmaWxlID0+IGZpbGUucGF0aCA9PT0gdGhpcy5zZXR0aW5ncy5pc29sYXRpb25GaWxlUGF0aCk7XG5cdFx0aWYgKCFpc29sYXRpb25GaWxlKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiTm8gaXNvbGF0aW9uIGZpbGUuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBpc29sYXRpb25GaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoaXNvbGF0aW9uRmlsZSk7XG5cblx0XHQvLyBFeHRyYWN0IHRoZSBmcm9udG1hdHRlciBmcm9tIHRoZSBpc29sYXRpb24gZmlsZS5cblx0XHRsZXQgaXNvbGF0aW9uRmlsZUZtO1xuXHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyXG5cdFx0XHQucHJvY2Vzc0Zyb250TWF0dGVyKGlzb2xhdGlvbkZpbGUsIChmcm9udG1hdHRlcikgPT4gaXNvbGF0aW9uRmlsZUZtID0gZnJvbnRtYXR0ZXIpXG5cdFx0XHQuY2F0Y2goXyA9PiB0aGlzLnNob3dGYWlsTm90aWNlKFwiUHJvY2Vzc2luZyBmcm9udG1hdHRlci5cIikpO1xuXHRcdGlmICghaXNvbGF0aW9uRmlsZUZtKSB7XG5cdFx0XHR0aGlzLnNob3dGYWlsTm90aWNlKFwiQ291bGRuJ3QgcHJvY2VzcyBmcm9udG1hdHRlci5cIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRXh0cmFjdCB0aGUgY29udGVudHMgdG8gd3JpdGUgYmFjayBmcm9tIHRoZSBpc29sYXRpb24gZmlsZS5cblx0XHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gaXNvbGF0aW9uRmlsZUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS1cXG4vKTtcblx0XHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcblx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJObyB0ZXh0IHRvIHdyaXRlIGJhY2sgZnJvbSB0aGUgaXNvbGF0aW9uIGZpbGUuXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBpc29sYXRpb25GaWxlVGV4dCA9IGlzb2xhdGlvbkZpbGVDb250ZW50LnJlcGxhY2UoZnJvbnRtYXR0ZXJNYXRjaFswXSwgXCJcIik7XG5cdFx0Y29uc3QgaXNvbGF0aW9uRmlsZUxpbmVzID0gaXNvbGF0aW9uRmlsZVRleHQuc3BsaXQoXCJcXG5cIik7XG5cblx0XHQvLyBBcHBseSB0aGUgb2Zmc2V0LlxuXHRcdGNvbnN0IG9mZnNldElzb2xhdGlvbkZpbGVMaW5lcyA9IGlzb2xhdGlvbkZpbGVMaW5lcy5tYXAobGluZSA9PiBcIlxcdFwiLnJlcGVhdChpc29sYXRpb25GaWxlRm0ub2Zmc2V0KSArIGxpbmUpO1xuXG5cdFx0Ly8gQ2hlY2sgYW5kIGdldCB0aGUgb3JpZ2luIGZpbGUuXG5cdFx0Y29uc3Qgb3JpZ2luRmlsZVBhdGggPSBpc29sYXRpb25GaWxlRm0ub3JpZ2luO1xuXHRcdGNvbnN0IG9yaWdpbkZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGggPT09IG9yaWdpbkZpbGVQYXRoKTtcblx0XHRpZiAoIW9yaWdpbkZpbGUpIHtcblx0XHRcdHRoaXMuc2hvd0ZhaWxOb3RpY2UoXCJPcmlnaW4gZmlsZSBkb2Vzbid0IGV4aXN0LlwiKTtcblx0XHRcdC8vIHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gV3JpdGUgYmFjayB0aGUgaXNvbGF0ZWQgY29udGVudCBpbnRvIHRoZSBvcmlnaW4gZmlsZS5cblx0XHRjb25zdCBvcmlnaW5GaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQob3JpZ2luRmlsZSk7XG5cdFx0Y29uc3Qgb3JpZ2luRmlsZUxpbmVzID0gb3JpZ2luRmlsZUNvbnRlbnQuc3BsaXQoXCJcXG5cIik7XG5cdFx0Y29uc3Qgb3JpZ2luTGluZXNUb1JlbW92ZVJhbmdlID0gaXNvbGF0aW9uRmlsZUZtLmVuZExpbmUgKyAxIC0gaXNvbGF0aW9uRmlsZUZtLnN0YXJ0TGluZTtcblx0XHRvcmlnaW5GaWxlTGluZXMuc3BsaWNlKGlzb2xhdGlvbkZpbGVGbS5zdGFydExpbmUsIG9yaWdpbkxpbmVzVG9SZW1vdmVSYW5nZSwgLi4ub2Zmc2V0SXNvbGF0aW9uRmlsZUxpbmVzKTtcblx0XHRjb25zdCBtb2RpZmllZE9yaWdpbkNvbnRlbnQgPSBvcmlnaW5GaWxlTGluZXMuam9pbihcIlxcblwiKTtcblxuXHRcdC8vIEFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSBvcmlnaW4gZmlsZS5cblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkob3JpZ2luRmlsZSwgbW9kaWZpZWRPcmlnaW5Db250ZW50KTtcblxuXHRcdC8vIE9wZW4gdGhlIG9yaWdpbiBmaWxlIG9yIHRoZSBnaXZlbiBmaWxlIHRvIG9wZW4gYWZ0ZXIuXG5cdFx0aWYgKG9wZW5PcmlnaW5GaWxlQWZ0ZXIpIHtcblx0XHRcdG5lZWRzV3JpdGVCYWNrVW5sb2FkRXZlbnQgPSBmYWxzZTtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUob3JpZ2luRmlsZSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIERlbGV0ZSB0aGUgaXNvbGF0aW9uIGZpbGUuXG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKSk7XG5cblx0fVxuXG5cdHNob3dGYWlsTm90aWNlKG1zZzogc3RyaW5nKSB7XG5cdFx0bmV3IE5vdGljZShcIkJ1bGxldFBvaW50SXNvbGF0aW9uIGZhaWxlZDogXCIgKyBtc2cpO1xuXHR9XG5cblx0Z2V0QnVsbGV0UG9pbnROcihlbGVtKSB7XG5cdFx0Y29uc3QgbWF0Y2ggPSBlbGVtLmNsYXNzTmFtZS5tYXRjaCgvSHlwZXJNRC1saXN0LWxpbmUtKFxcZCspLyk7XG5cdFx0cmV0dXJuIG1hdGNoID8gcGFyc2VJbnQobWF0Y2hbMV0pIDogbnVsbDtcblx0fVxuXG5cdGNvdW50QnVsbGV0UG9pbnRMaW5lcyhlbGVtKSB7XG5cblx0XHQvLyBTZXQgdGhlIHBhc3NlZCBlbGVtZW50IGFzIGluaXRpYWwgc2libGluZyBhbmQgaGV0IGl0cyBvZmZzZXQgbnVtYmVyLlxuXHRcdGxldCBzaWJsaW5nID0gZWxlbTtcblx0XHRjb25zdCByb290T2Zmc2V0ID0gdGhpcy5nZXRCdWxsZXRQb2ludE5yKHNpYmxpbmcpO1xuXG5cdFx0bGV0IHNpYmxpbmdDb3VudCA9IDE7XG5cdFx0d2hpbGUgKHNpYmxpbmcubmV4dFNpYmxpbmcgIT09IG51bGwpIHtcblxuXG5cdFx0XHQvLyBTZXQgdGhlIHNpYmxpbmcgYXMgaXRzIG5leHQgc2libGluZy5cblx0XHRcdHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nO1xuXG5cdFx0XHQvLyBJZiB0aGUgb2Zmc2V0IG51bWJlciBpcyBlcXVhbCBvciBsZXNzLCBicmVhayB0aGUgbG9vcC5cblx0XHRcdGNvbnN0IHNpYmxpbmdPZmZzZXQgPSB0aGlzLmdldEJ1bGxldFBvaW50TnIoc2libGluZyk7XG5cdFx0XHRpZiAocm9vdE9mZnNldCA+PSBzaWJsaW5nT2Zmc2V0KVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Ly8gSW5jcmVtZW50IHRoZSBzaWJsaW5ncyBjb3VudC5cblx0XHRcdHNpYmxpbmdDb3VudCsrO1xuXHRcdH1cblxuXHRcdHJldHVybiBzaWJsaW5nQ291bnQ7XG5cdH1cblxuXHRjb252ZXJ0SnNvblRvRnJvbnRtYXR0ZXIob2JqLCBwZW5kaW5nTmV3bGluZTogYm9vbGVhbiA9IHRydWUpIHtcblx0XHRsZXQgZnJvbnRtYXR0ZXJBcnIgPSBPYmplY3Qua2V5cyhvYmopLm1hcCgoa2V5KSA9PiBgJHtrZXl9OiAke29ialtrZXldfWApO1xuXHRcdGZyb250bWF0dGVyQXJyLnB1c2goXCItLS1cIik7XG5cdFx0ZnJvbnRtYXR0ZXJBcnIudW5zaGlmdChcIi0tLVwiKTtcblx0XHRsZXQgZnJvbnRtYXR0ZXJUZXh0ID0gZnJvbnRtYXR0ZXJBcnIuam9pbihcIlxcblwiKVxuXHRcdHJldHVybiBwZW5kaW5nTmV3bGluZVxuXHRcdFx0PyBmcm9udG1hdHRlclRleHQgKyBcIlxcblwiXG5cdFx0XHQ6IGZyb250bWF0dGVyVGV4dDtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBCdWxsZXRQb2ludElzb2xhdG9yTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBCdWxsZXRQb2ludElzb2xhdG9yU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEJ1bGxldFBvaW50SXNvbGF0b3I7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQnVsbGV0UG9pbnRJc29sYXRvcikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7dGV4dDogXCJCdWxsZXQgUG9pbnQgSXNvbGF0b3IgUGx1Z2luIC0gU2V0dGluZ3NcIn0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIklzb2xhdGlvbiBmaWxlIHBhdGhcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIHBhdGggd2hlcmUgdGhlIGlzb2xhdGlvbiBmaWxlIHNob3VsZCBiZSBjcmVhdGVkLlwiKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIlRoZSBwYXRoIGhlcmUuLi5cIilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlzb2xhdGlvbkZpbGVQYXRoKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNvbGF0aW9uRmlsZVBhdGggPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQW9MO0FBU3BMLElBQU0sbUJBQWdEO0FBQUEsRUFDckQsbUJBQW1CO0FBQ3BCO0FBRUEsSUFBSSw0QkFBNEI7QUFDaEMsSUFBSTtBQUVKLElBQXFCLHNCQUFyQixjQUFpRCx1QkFBTztBQUFBLEVBR3ZELE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBQ3hCLFlBQVEsSUFBSSxZQUFZLEtBQUssUUFBUTtBQUdyQyxVQUFNLGVBQWUsS0FBSyxjQUFjLFFBQVEsOEJBQThCLENBQUMsUUFBb0I7QUFFbEcsVUFBSSx1QkFBTywyQkFBMkI7QUFBQSxJQUN2QyxDQUFDO0FBRUQsaUJBQWEsU0FBUyx3QkFBd0I7QUFHOUMsVUFBTSxrQkFBa0IsS0FBSyxpQkFBaUI7QUFDOUMsb0JBQWdCLFFBQVEsaUJBQWlCO0FBWXpDLFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLE9BQU8sUUFBZ0IsUUFBeUM7QUFoRG5GO0FBbURJLFlBQUksMkJBQTJCO0FBRzlCLGdC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
